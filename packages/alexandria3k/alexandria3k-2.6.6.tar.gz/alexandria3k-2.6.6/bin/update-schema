#!/bin/sh
#
# Create individual and combined schema diagrams
#

set -e

for format in svg pdf ; do
  # Create individual schema diagrams
  for schema in crossref orcid ror other ; do
    (
      cat docs/schema/schema-head.dot docs/schema/$schema.dot
      bin/alexandria3k --list-schema $schema | bin/schema2dot.sed
    ) | dot -T$format  -o docs/schema/$schema.$format
  done

  # Create combined schema diagram
  (
    ( cd docs/schema ; cat schema-head.dot crossref.dot orcid.dot ror.dot other.dot )
    bin/alexandria3k --list-schema all | bin/schema2dot.sed
  ) | dot -T$format  -o docs/schema/all.$format
done
