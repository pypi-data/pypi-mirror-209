"use strict";(self.webpackChunk_dagster_io_dagit_app=self.webpackChunk_dagster_io_dagit_app||[]).push([[158],{46860:function(e,n,t){t.d(n,{q:function(){return v}});var r=t(96234),a=t(33028),i=t(56666),o=t(8236),u=t.n(o),l=t(76892),c=t.n(l),s=t(78193),f=t(50032),d={};function v(e){var n=e.queryKey,t=e.defaults,o=e.encode,l=e.decode;n&&(o||(o=function(e){return(0,i.Z)({},n,e)}),l||(l=function(e){return p(e[n])}));var v=(0,f.TH)(),g=(0,f.k6)(),x=s.useMemo((function(){d=c().parse(v.search,{ignoreQueryPrefix:!0});var e=(0,a.Z)((0,a.Z)({},t||{}),d);return l?l(e):function(e){for(var n={},t=0,r=Object.keys(e);t<r.length;t++){var a=r[t];n[a]=p(e[a])}return n}(e)}),[v.search,l,t]),m=s.useRef(x),h=s.useCallback((function(n){for(var t=(0,a.Z)((0,a.Z)({},d),o?o(n):n),i=0,u=Object.entries(t);i<u.length;i++){var l=(0,r.Z)(u[i],2),s=l[0],f=l[1];e.defaults&&e.defaults[s]===f&&delete t[s]}d=t,g.replace("".concat(v.pathname,"?").concat(c().stringify(t,{arrayFormat:"brackets"})))}),[g,o,v.pathname,e]);return u()(m.current,x)||(m.current=x),[m.current,h]}function p(e){return"false"!==e&&("true"===e||e)}},34918:function(e,n,t){t.d(n,{F:function(){return a}});var r=t(78193);function a(e,n){var t=r.useRef(e);t.current=e;var a=r.useRef(n);return a.current=n,r.useCallback((function(e){t.current=e instanceof Function?e(t.current):e,a.current(t.current)}),[])}},24265:function(e,n,t){t.d(n,{h:function(){return s}});var r=t(47515),a=t(58507),i=t(32667),o=(t(78193),t(97412)),u=t(63167),l=t(48341),c=t(35936),s=function(e){var n=e.pipelineName,t=e.pipelineHrefContext,s=e.isJob,f=e.snapshotId,d=e.showIcon,v=e.truncationThreshold,p=void 0===v?40:v,g=e.size,x=void 0===g?"normal":g,m=p>0&&n.length>p?"".concat(n.slice(0,p-5),"\u2026"):n,h="repo-unknown"===t?(0,c.jsx)(o.rU,{to:(0,u.r4)(n,s),children:m}):"no-link"===t?(0,c.jsx)(c.Fragment,{children:m}):(0,c.jsx)(o.rU,{to:(0,u.jT)({repoName:t.name,repoLocation:t.location,pipelineName:n,isJob:s}),children:m});return(0,c.jsxs)(r.x,{flex:{direction:"row",alignItems:"center",display:"inline-flex"},children:[d&&(0,c.jsx)(r.x,{margin:{right:8},children:(0,c.jsx)(a.JO,{color:i.w.Gray400,name:"job"})}),(0,c.jsxs)("span",{children:[h,f&&" @ ",f&&(0,c.jsx)(l.J2,{snapshotId:f,pipelineName:n,size:x})]})]})}},20967:function(e,n,t){t.d(n,{Ys:function(){return i},_m:function(){return o},cv:function(){return l},hd:function(){return u},oV:function(){return c},sy:function(){return a}});var r=t(23555),a=new Set([r.VOA.QUEUED]),i=new Set([r.VOA.STARTED,r.VOA.STARTING,r.VOA.CANCELING]),o=new Set([r.VOA.SUCCESS]),u=new Set([r.VOA.FAILURE,r.VOA.CANCELED]),l=new Set([r.VOA.FAILURE,r.VOA.SUCCESS,r.VOA.CANCELED]),c=new Set([r.VOA.QUEUED,r.VOA.STARTED])},22264:function(e,n,t){t.d(n,{VH:function(){return S},it:function(){return j},nr:function(){return Z},oD:function(){return w}});var r,a,i=t(71171),o=t(33028),u=t(96234),l=t(41361),c=t(44719),s=t(31623),f=t(29845),d=t(76892),v=t.n(d),p=t(78193),g=t(72691),x=t(23555),m=t(46860),h=t(92761),y=t(11746),k=t(35936),b=[{token:"id",values:function(){return[]}},{token:"status",values:function(){return[]}},{token:"pipeline",values:function(){return[]}},{token:"job",values:function(){return[]}},{token:"tag",values:function(){return[]}},{token:"snapshotId",values:function(){return[]}}];function w(e){return(0,m.q)(p.useMemo((function(){return{encode:function(e){return{q:(0,f.cJ)(e),cursor:void 0}},decode:function(n){var t=n.q,r=void 0===t?[]:t;return(0,f.TC)(r,b).filter((function(n){return!n.token||!e||e.includes(n.token)}))}}}),[e]))}function j(e){return"/runs?".concat(v().stringify({q:(0,f.cJ)(e)},{arrayFormat:"brackets"}))}function S(e){if(!e[0])return{};var n,t={},r=(0,l.Z)(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;if("pipeline"===a.token||"job"===a.token)t.pipelineName=a.value;else if("id"===a.token)t.runIds=t.runIds||[],t.runIds.push(a.value);else if("status"===a.token)t.statuses=t.statuses||[],t.statuses.push(a.value);else if("snapshotId"===a.token)t.snapshotId=a.value;else if("tag"===a.token){var i=a.value.split("="),o=(0,u.Z)(i,2),c=o[0],s=o[1],f=void 0===s?"":s;t.tags?t.tags.push({key:c,value:f}):t.tags=[{key:c,value:f}]}}}catch(d){r.e(d)}finally{r.f()}return t}var Z=function(e){var n=(0,g.gV)().flagRunsTableFiltering,t=(0,y.Vv)(e),r=t.button,a=t.activeFiltersJsx;return n?(0,k.jsxs)("div",{children:[r,a]}):(0,k.jsx)(C,(0,o.Z)({},e))},C=function(e){var n,t,r=e.tokens,a=e.onChange,i=e.enabledFilters,o=e.loading,s=(0,h.vl)().options,d=p.useState(),v=(0,u.Z)(d,2),g=v[0],m=v[1],y=(0,c.t)(_),b=(0,u.Z)(y,2),w=b[0],j=b[1].data,S=(0,c.t)(T,{variables:{tagKeys:g?[g]:[]}}),Z=(0,u.Z)(S,2),C=Z[0],O=Z[1].data;p.useEffect((function(){g&&C()}),[g,C]);var D=function(e,n,t,r,a){var i,o=new Set,u=new Set,c=(0,l.Z)(e);try{for(c.s();!(i=c.n()).done;){var s,f=i.value.repository,d=(0,l.Z)(f.pipelines);try{for(d.s();!(s=d.n()).done;){var v=s.value;v.isJob?u.add(v.name):o.add(v.name)}}catch(g){d.e(g)}finally{d.f()}}}catch(g){c.e(g)}finally{c.f()}var p=[{token:"id",values:function(){return[]}},{token:"status",values:function(){return Object.keys(x.VOA)}},{token:"pipeline",values:function(){return Array.from(o)}},{token:"job",values:function(){return Array.from(u)}},{token:"tag",values:function(){return t?(r||[]).filter((function(e){return e.key===t})).map((function(e){return e.values.map((function(e){return"".concat(t,"=").concat(e)}))})).flat():(n||[]).map((function(e){return"".concat(e)}))},textOnly:!t},{token:"snapshotId",values:function(){return[]}}];return a?p.filter((function(e){return a.includes(e.token)})):p}(s,"RunTagKeys"===(null===j||void 0===j||null===(n=j.runTagKeysOrError)||void 0===n?void 0:n.__typename)?j.runTagKeysOrError.keys:[],g,"RunTags"===(null===O||void 0===O||null===(t=O.runTagsOrError)||void 0===t?void 0:t.__typename)?O.runTagsOrError.tags:[],i),I=(0,f.TC)((0,f.cJ)(r),D),A=p.useCallback((function(){return w()}),[w]);return(0,k.jsx)(f.Gf,{values:I,onChange:function(e){return a(e)},onFocus:A,onTextChange:function(e){var n;if(e.startsWith("tag:")){var t=e.slice(4);"RunTagKeys"===(null===j||void 0===j||null===(n=j.runTagKeysOrError)||void 0===n?void 0:n.__typename)&&j.runTagKeysOrError.keys.includes(t)&&m(t)}},suggestionProviders:D,suggestionProvidersFilter:function(e,n){var t,r=[],a=(0,l.Z)(n);try{for(a.s();!(t=a.n()).done;){var i=t.value.token;i&&r.push(i)}}catch(c){a.e(c)}finally{a.f()}if(r.includes("id"))return[];var o=new Set(["id","job","pipeline","snapshotId"]),u=r.filter((function(e){return o.has(e)}));return e.filter((function(e){return!e.token||!u.includes(e.token)}))},loading:o})},_=(0,s.Ps)(r||(r=(0,i.Z)(["\n  query RunTagKeysQuery {\n    runTagKeysOrError {\n      ... on RunTagKeys {\n        keys\n      }\n    }\n  }\n"]))),T=(0,s.Ps)(a||(a=(0,i.Z)(["\n  query RunTagValuesQuery($tagKeys: [String!]!) {\n    runTagsOrError(tagKeys: $tagKeys) {\n      ... on RunTags {\n        tags {\n          key\n          values\n        }\n      }\n    }\n  }\n"])))},11746:function(e,n,t){t.d(n,{VH:function(){return Oe},oD:function(){return Te},Vv:function(){return Ie}});var r,a=t(71171),i=t(33028),o=t(68079),u=t(32723),l=t(34795),c=t(96234),s=t(41361),f=t(44719),d=t(61794),v=t(31623),p=t(29845),g=t(47515),x=t(58507),m=t(65537),h=t.n(m),y=(t(76892),t(78193)),k=t(9938),b=t(23555),w=t(46860),j=t(1360),S=t(78612),Z=t(59740),C=t(60319),_=t(80923),T=t(85357),O=t(62459),D=t(73070),I=t(45519),A=t(32667),R=t(25626),E=t(82039),F=t(30382),L=t(34918),M=function(e){var n=y.useRef(e);return n.current=e,n},V=t(93015),K=t(35936),z=["menuKey","index"],J=function(e){var n=e.filters,t=e.setIsOpen,r=e.setPortaledElements,a=y.useState((function(){return(0,E.Z)()})),i=(0,c.Z)(a,2),s=i[0],f=(i[1],y.useState(-1)),d=(0,c.Z)(f,2),v=d[0],p=d[1],m=(0,y.useState)(""),h=(0,c.Z)(m,2),k=h[0],b=h[1],w=(0,y.useState)(null),j=(0,c.Z)(w,2),S=j[0],Z=j[1],C=y.useMemo((function(){return n.find((function(e){return e.name===S}))}),[n,S]),D=(0,L.F)(S,(function(e){var n;(Z(e),null===e)&&(C&&(null===(n=C.onUnselected)||void 0===n||n.call(C)))})),I=M(C);y.useLayoutEffect((function(){return function(){var e,n;null===(e=I.current)||void 0===e||null===(n=e.onUnselected)||void 0===n||n.call(e)}}),[I]);var A=y.useMemo((function(){var e=C?[]:k?n.filter((function(e){return e.name.toLowerCase().includes(k.toLowerCase())})):n,t={};return k&&n.forEach((function(e){t[e.name]=e.getResults(k)})),{results:t,filteredFilters:e}}),[k,n,C]),F=A.results,z=A.filteredFilters,J=y.useCallback((function(e,n){e.onSelect({value:n,close:function(){b(""),D(null),p(-1),t(!1)},clearSearch:function(){b("")},createPortal:function(n){var t=(0,K.jsx)(y.Fragment,{children:n},e.name);return r((function(e){return[].concat((0,o.Z)(e),[t])})),function(){r((function(e){return e.filter((function(e){return e!==t}))}))}}})}),[t,r,D]),N=y.useMemo((function(){if(C)return C.getResults(k).map((function(e,n){return(0,K.jsx)(U,{onClick:function(){return J(C,e.value)},text:e.label,index:n,menuKey:s,active:v===n},"filter:".concat(C.name,":").concat(e.key))}));var e=[];return n.forEach((function(n){var t;if(z.includes(n)){var r=e.length;e.push((0,K.jsx)(U,{onClick:function(){D(n.name),p(-1)},text:(0,K.jsxs)(g.x,{flex:{direction:"row",gap:12},children:[(0,K.jsx)(x.JO,{name:n.icon}),n.name]}),index:r,menuKey:s,active:v===r},"filter:".concat(n.name)))}null===(t=F[n.name])||void 0===t||t.forEach((function(t){var r=e.length;e.push((0,K.jsx)(U,{onClick:function(){D(n.name),J(n,t.value)},text:t.label,index:r,menuKey:s,active:v===r},"filter-result:".concat(n.name,":").concat(t.key)))}))})),e}),[C,n,k,s,v,J,z,F,D]),B=(0,y.useRef)(null),Y=(0,y.useRef)(null),W=y.useCallback(function(){var e=(0,l.Z)((0,u.Z)().mark((function e(n){var r,a,i,o;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=N.length-1,"ArrowDown"!==n.key&&("Tab"!==n.key||n.shiftKey)){e.next=6;break}p((function(e){return e===r?-1:e+1})),n.preventDefault(),e.next=19;break;case 6:if(!("ArrowUp"===n.key||"Tab"===n.key&&n.shiftKey)){e.next=11;break}p((function(e){return-1===e?r:e-1})),n.preventDefault(),e.next=19;break;case 11:if("Enter"!==n.key&&" "!==n.key){e.next=18;break}if(-1!==v){e.next=14;break}return e.abrupt("return");case 14:n.preventDefault(),null===(a=N[v])||void 0===a||null===(i=(o=a.props).onClick)||void 0===i||i.call(o),e.next=19;break;case 18:"Escape"===n.key?C?(D(null),p(-1)):t(!1):n.target===B.current&&p(-1);case 19:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[N,v,C,D,t]),$=y.useRef(null),Q=(0,R.useVirtualizer)({count:N.length,getScrollElement:function(){return $.current},estimateSize:function(e){return 32},overscan:10}),X=Q.getTotalSize(),ee=Q.getVirtualItems();return(0,K.jsxs)("div",{children:[(0,K.jsxs)(H,{children:[(0,K.jsx)(_.oi,{type:"text",value:k,onChange:function(e){return b(e.target.value)},onKeyDown:W,placeholder:"Search filters...",ref:function(e){B.current=e,null===e||void 0===e||e.focus()},"aria-label":"Search filters","aria-activedescendant":-1!==v?q(s,v):void 0,role:"combobox","aria-expanded":"true","aria-owns":s}),(0,K.jsx)(g.x,{flex:{justifyContent:"center",alignItems:"center"},padding:{vertical:12,horizontal:16},children:(0,K.jsx)(G,{children:"f"})})]}),(0,K.jsx)(T.v2,{children:(0,K.jsx)(P,{id:s,ref:Y,onKeyDown:W,children:C&&C.isLoadingFilters?(0,K.jsx)(g.x,{padding:{vertical:12,horizontal:16},children:(0,K.jsx)(O.$,{purpose:"section"})}):N.length?(0,K.jsx)(V.W2,{ref:$,style:{maxHeight:"500px",overflowY:"auto"},children:(0,K.jsx)(V.Nh,{$totalHeight:X,children:ee.map((function(e){var n=e.index,t=e.end,r=e.start;return(0,K.jsx)(V.X2,{$height:t-r,$start:r,children:N[n]},n)}))})}):(0,K.jsx)(g.x,{padding:{vertical:12,horizontal:16},children:"No results"})})})]})},N=y.memo((function(e){var n=e.filters,t=y.useRef(0),r=(0,y.useState)(!1),a=(0,c.Z)(r,2),i=a[0],o=a[1],u=y.useRef(i),l=(0,L.F)(i,(function(e){o(e),e&&!u.current&&t.current++,u.current=e})),s=(0,y.useState)([]),f=(0,c.Z)(s,2),d=f[0],v=f[1],p=y.useRef(null),g=y.useRef(null);return y.useLayoutEffect((function(){var e=function(e){var n,t;null!==(n=p.current)&&void 0!==n&&n.contains(e.target)||null!==(t=g.current)&&void 0!==t&&t.contains(e.target)||!document.contains(e.target)||l(!1)};return document.body.addEventListener("click",e),function(){document.body.removeEventListener("click",e)}}),[l]),(0,K.jsxs)(F.b,{shortcutLabel:"F",shortcutFilter:function(e){return"KeyF"===e.code},onShortcut:function(){return l((function(e){return!e}))},children:[(0,K.jsx)(Y,{}),(0,K.jsx)(D.J,{content:(0,K.jsx)("div",{ref:g,children:(0,K.jsx)(J,{filters:n,setIsOpen:l,setPortaledElements:v},t.current)}),canEscapeKeyClose:!0,popoverClassName:"filter-dropdown",isOpen:i,position:"bottom",onClosing:function(){u.current=!1},children:(0,K.jsx)("div",{children:(0,K.jsx)(D.J,{content:(0,K.jsx)(K.Fragment,{children:d}),canEscapeKeyClose:!0,isOpen:!!d.length,position:"bottom",children:(0,K.jsx)(I.zx,{ref:p,icon:(0,K.jsx)(x.JO,{name:"filter_alt"}),onClick:function(){l((function(e){return!e}))},children:"Filter"})})})})]})})),P=C.ZP.div.withConfig({displayName:"FilterDropdown__DropdownMenuContainer",componentId:"sc-iz39lk-0"})(["","{margin-left:0 !important;}"],x.a1),H=C.ZP.div.withConfig({displayName:"FilterDropdown__TextInputWrapper",componentId:"sc-iz39lk-1"})(["display:flex;flex-direction:row;flex-gap:12px;> *:first-child{flex-grow:1;}input{padding:12px 16px;&,:focus,:active,:hover{box-shadow:none;}}"]),U=y.memo((function(e){var n=e.menuKey,t=e.index,r=(0,Z.Z)(e,z),a=y.useRef(null);return y.useLayoutEffect((function(){var e,n;r.active&&(a.current&&(null===(e=a.current)||void 0===e||null===(n=e.scrollIntoView)||void 0===n||n.call(e,{block:"center"})))}),[r.active]),(0,K.jsx)("div",{role:"option",id:q(n,t),"aria-selected":r.active?"true":"false",ref:a,children:(0,K.jsx)(B,(0,i.Z)({},r))})})),B=(0,C.ZP)(T.sN).withConfig({displayName:"FilterDropdown__StyledMenuItem",componentId:"sc-iz39lk-2"})(["&.bp4-active:focus{color:white;box-shadow:initial;}"]),G=C.ZP.div.withConfig({displayName:"FilterDropdown__SlashShortcut",componentId:"sc-iz39lk-3"})(["border-radius:4px;padding:0px 6px;background:",";color:",";"],A.w.Gray100,A.w.Gray500),Y=(0,C.vJ)(r||(r=(0,a.Z)(["\n  .filter-dropdown.filter-dropdown.filter-dropdown.filter-dropdown {\n    margin-left: 16px !important;\n    border-radius: 8px;\n    max-width: 100%;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    .bp4-popover2-content {\n      border-radius: 8px;\n    }\n  }\n  \n  .bp4-overlay-content {\n    max-width: 100%;\n  }\n"])));function q(e,n){return"item-".concat(e,"-").concat(n)}var W=t(17914),$=t(72835),Q=["children"],X=function(e){var n=e.iconName,t=e.label,r=e.onRemove;return(0,K.jsx)("div",{style:{display:"inline-block",height:"24px"},children:(0,K.jsx)($.m,{icon:(0,K.jsx)(x.JO,{name:n,color:A.w.Link}),rightIcon:(0,K.jsx)("div",{onClick:r,style:{cursor:"pointer"},tabIndex:0,children:(0,K.jsx)(x.JO,{name:"close",color:A.w.Link})}),label:t,fillColor:A.w.Blue50,textColor:A.w.Link})})},ee=(0,C.ZP)(S.rd).withConfig({displayName:"useFilter__FilterTagHighlightedTextSpan",componentId:"sc-18s7bwe-0"})(["color:",";font-weight:600;font-size:12px;max-width:100px;"],A.w.Blue500),ne=y.forwardRef((function(e,n){var t=e.children,r=(0,Z.Z)(e,Q);return(0,K.jsx)(ee,(0,i.Z)((0,i.Z)({text:t,tooltipStyle:te},r),{},{ref:n}))})),te=JSON.stringify({background:A.w.Blue50,color:A.w.Blue500,border:"none",borderRadius:7,overflow:"hidden",fontSize:12,padding:"5px 10px",transform:"translate(-10px,-5px)",fontWeight:600});function re(e){var n=e.name,t=e.icon,r=e.getKey,a=e.allValues,i=e.renderLabel,o=e.renderActiveStateLabel,u=e.initialState,l=e.getStringValue,s=e.onStateChanged,f=e.allowMultipleSelections,d=void 0===f||f,v=e.matchType,p=void 0===v?"any-of":v,g=y.useState(new Set(u||[])),x=(0,c.Z)(g,2),m=x[0],h=x[1];y.useEffect((function(){null===s||void 0===s||s(m)}),[m]),y.useEffect((function(){h(u?new Set(u):new Set)}),[u]);var k=y.useMemo((function(){return{name:n,icon:t,state:m,isActive:m.size>0,getResults:function(e){return""===e?a.map((function(e,n){var t=e.value;return{label:(0,K.jsx)(ue,{value:t,renderLabel:i,filter:b.current,allowMultipleSelections:d}),key:(null===r||void 0===r?void 0:r(t))||n.toString(),value:t}})):a.filter((function(n){return n.match.some((function(n){return n.toLowerCase().includes(e.toLowerCase())}))})).map((function(e,n){var t=e.value;return{label:(0,K.jsx)(ue,{value:t,renderLabel:i,filter:b.current,allowMultipleSelections:d}),key:(null===r||void 0===r?void 0:r(t))||n.toString(),value:t}}))},onSelect:function(e){var n=e.value,t=new Set(b.current.state);t.has(n)?t.delete(n):d?t.add(n):t=new Set([n]),h(t)},activeJSX:(0,K.jsx)(ie,{name:n,state:m,getStringValue:l,renderLabel:o||i,onRemove:function(){h(new Set)},icon:t,matchType:p}),setState:h}}),[n,t,m,l,i,a,p,o]),b=M(k);return k}var ae=3;function ie(e){var n=e.name,t=e.state,r=e.icon,a=e.getStringValue,i=e.onRemove,o=e.renderLabel,u="any-of"===e.matchType,l=y.useMemo((function(){return Array.from(t)}),[t]),c=y.useMemo((function(){return 0===l.length?null:l.length<=ae?(0,K.jsxs)(K.Fragment,{children:["is\xa0",1===l.length?"":(0,K.jsxs)(K.Fragment,{children:[u?"any of":"all of","\xa0"]}),l.map((function(e,n){return(0,K.jsxs)(y.Fragment,{children:[(0,K.jsx)(ne,{children:a(e)}),n<l.length-1?(0,K.jsx)(K.Fragment,{children:",\xa0"}):""]},n)}))]}):(0,K.jsxs)(g.x,{flex:{direction:"row",alignItems:"center"},children:["is ",(0,K.jsxs)(K.Fragment,{children:[u?"any of":"all of","\xa0"]}),(0,K.jsx)(D.J,{interactionKind:"hover",position:"bottom",content:(0,K.jsx)(g.x,{padding:{vertical:8,horizontal:12},flex:{direction:"column",gap:4},children:l.map((function(e){return(0,K.jsx)("div",{style:{maxWidth:"500px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:o({value:e,isActive:!0})},a(e))}))}),children:(0,K.jsx)(ne,{children:"".concat(l.length," ").concat(n.toLowerCase(),"s")})})]})}),[l,a,u,n,o]);return 0===l.length?null:(0,K.jsx)(X,{iconName:r,label:(0,K.jsxs)(g.x,{flex:{direction:"row",alignItems:"center"},children:[oe(n),"\xa0",c]}),onRemove:i})}function oe(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase().replace(/_/g," ")}function ue(e){var n=e.value,t=e.filter,r=e.renderLabel,a=e.allowMultipleSelections,i=t.state.has(n),o=y.useRef(null);return(0,K.jsxs)(g.x,{flex:{direction:"row",gap:6,alignItems:"center"},ref:o,margin:{left:4},style:{maxWidth:"500px"},children:[a?(0,K.jsx)(W.X,{checked:i,size:"small",readOnly:!0}):null,(0,K.jsx)(g.x,{flex:{direction:"row",alignItems:"center",grow:1,shrink:1},style:{overflow:"hidden"},children:(0,K.jsx)("div",{style:{overflow:"hidden"},children:r({value:n,isActive:i})})})]})}function le(e){var n=e.name,t=e.icon,r=e.freeformSearchResult,a=e.state,i=e.setState,s=e.initialSuggestions,f=e.onSuggestionClicked,d=e.getStringValue,v=e.getKey,p=e.renderLabel,g=e.renderActiveStateLabel,x=e.isMatch,m=e.matchType,h=void 0===m?"any-of":m,k=y.useState(!1),b=(0,c.Z)(k,2),w=b[0],j=b[1],S=y.useState(null),Z=(0,c.Z)(S,2),C=Z[0],_=Z[1],T=M(C),O=M(w),D=y.useState([]),I=(0,c.Z)(D,2),A=I[0],R=I[1],E=y.useMemo((function(){return{name:n,icon:t,state:a,isActive:a.length>0,onUnselected:function(){_(null),j(!1),R([])},isLoadingFilters:w,getResults:function(e){var n,t,a=!1;T.current||O.current?n=(null===(t=T.current)||void 0===t?void 0:t.filter((function(n){var t=n.value;return d(t)===e&&(a=!0),""===e||x(t,e)})).map((function(e,n){return{label:(0,K.jsx)(ce,{value:e.value,renderLabel:p,filter:F.current}),key:(null===v||void 0===v?void 0:v(e.value))||n.toString(),value:e}})))||[]:n=s.filter((function(n){var t=n.value;return d(t)===e&&(a=!0),""===e||x(t,e)})).map((function(e,n){return{label:(0,K.jsx)(ce,{value:e.value,renderLabel:p,filter:F.current}),key:(null===v||void 0===v?void 0:v(e.value))||n.toString(),value:e}}));if(!a&&r&&e.length){var i=r(e,A);n.unshift({label:(0,K.jsx)(ce,{value:i.value,renderLabel:p,filter:F.current}),key:(null===v||void 0===v?void 0:v(i.value))||"freeform",value:i})}return n},onSelect:function(){var e=(0,l.Z)((0,u.Z)().mark((function e(n){var t,r,l,c;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.value,r=n.clearSearch,!t.final){e.next=5;break}a.includes(t.value)?i(a.filter((function(e){return e!==t.value}))):i([].concat((0,o.Z)(a),[t.value])),e.next=15;break;case 5:if(r(),l=f(t.value),R((function(e){return[].concat((0,o.Z)(e),[t.value])})),!l){e.next=15;break}return j(!0),e.next=12,l;case 12:c=e.sent,_(c),j(!1);case 15:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),activeJSX:(0,K.jsx)(ie,{name:n,state:new Set(a),getStringValue:d,renderLabel:g||p,onRemove:function(){i([])},icon:t,matchType:h})}}),[n,t,a,w,d,g,p,h,T,O,s,r,x,v,A,i,f]),F=M(E);return E}function ce(e){var n=e.value,t=e.filter,r=e.renderLabel,a=t.state.includes(n),i=y.useRef(null);return(0,K.jsx)(g.x,{flex:{direction:"row",gap:6,alignItems:"center"},ref:i,margin:{left:4},style:{maxWidth:"500px",overflow:"hidden"},children:(0,K.jsx)("div",{style:{overflow:"hidden"},children:r({value:n,isActive:a})})})}var se=t(3077),fe=t(8236),de=t.n(fe),ve=t(58203),pe=t.n(ve),ge=t(59234);t(28407),t(89342);function xe(e){var n=e.name,t=e.icon,r=e.timezone,a=e.initialState,i=e.onStateChanged,o=y.useState(a||[null,null]),u=(0,c.Z)(o,2),l=u[0],s=u[1];y.useEffect((function(){null===i||void 0===i||i(l)}),[l[0],l[1]]),y.useEffect((function(){s(a||[null,null])}),[a]);var f=y.useMemo((function(){return function(e){var n={TODAY:{label:"Today",range:[pe()().tz(e).startOf("day").toDate().valueOf(),null]},YESTERDAY:{label:"Yesterday",range:[pe()().tz(e).subtract(1,"day").startOf("day").toDate().valueOf(),pe()().tz(e).subtract(1,"day").endOf("day").toDate().valueOf()]},LAST_7_DAYS:{label:"Within last 7 days",range:[pe()().tz(e).subtract(7,"days").toDate().valueOf(),null]},LAST_30_DAYS:{label:"Within last 30 days",range:[pe()().tz(e).subtract(30,"days").toDate().valueOf(),null]},CUSTOM:{label:"Custom...",range:[null,null]}},t=Object.keys(n).map((function(e){var t=e;return{key:t,label:n[t].label,range:n[t].range}}));return{timeRanges:n,timeRangesArray:t}}(r)}),[r,Math.floor(Date.now()/36e5)]),d=f.timeRanges,v=f.timeRangesArray,p=function(){s([null,null])},g=y.useMemo((function(){return{name:n,icon:t,state:l,setState:s,isActive:null!==l[0]||null!==l[1],getResults:function(e){return v.filter((function(n){var t=n.label;return""===e||t.toLowerCase().includes(e.toLowerCase())})).map((function(e){var n=e.label,t=e.key;return{label:(0,K.jsx)(me,{range:n}),key:t,value:t}}))},onSelect:function(e){var n=e.value,t=e.close,r=e.createPortal;if("CUSTOM"===n){var a={current:function(){}};a.current=r((0,K.jsx)(ye,{filter:x.current,closeRef:a}))}else{var i=d[n].range;s(i)}t()},activeJSX:(0,K.jsx)(he,{timeRanges:d,state:l,timezone:r,remove:p})}}),[n,t,l,d,r,v]),x=M(g);return g}function me(e){var n=e.range;return(0,K.jsxs)(g.x,{flex:{direction:"row",gap:12,alignItems:"center"},children:[(0,K.jsx)(x.JO,{name:"date",color:A.w.Dark}),n]})}function he(e){var n=e.state,t=e.remove,r=e.timezone,a=e.timeRanges,i=y.useMemo((function(){return new Intl.DateTimeFormat(navigator.language,{year:"numeric",month:"numeric",day:"numeric",timeZone:"Automatic"===r?Intl.DateTimeFormat().resolvedOptions().timeZone:r})}),[r]),o=y.useMemo((function(){return de()(n,a.TODAY.range)?(0,K.jsxs)(K.Fragment,{children:["is ",(0,K.jsx)(ne,{children:"Today"})]}):de()(n,a.YESTERDAY.range)?(0,K.jsxs)(K.Fragment,{children:["is ",(0,K.jsx)(ne,{children:"Yesterday"})]}):de()(n,a.LAST_7_DAYS.range)?(0,K.jsxs)(K.Fragment,{children:["is within ",(0,K.jsx)(ne,{children:"Last 7 days"})]}):de()(n,a.LAST_30_DAYS.range)?(0,K.jsxs)(K.Fragment,{children:["is within ",(0,K.jsx)(ne,{children:"Last 30 days"})]}):n[0]?n[1]?(0,K.jsxs)(K.Fragment,{children:["is in range"," ",(0,K.jsx)(ne,{children:i.format(n[0])})," - ",(0,K.jsx)(ne,{children:i.format(n[1])})]}):(0,K.jsxs)(K.Fragment,{children:["is after"," ",(0,K.jsx)(ne,{children:i.format(n[0])})]}):(0,K.jsxs)(K.Fragment,{children:["is before"," ",(0,K.jsx)(ne,{children:i.format(n[1])})]})}),[i,n,a]);return(0,K.jsx)(X,{iconName:"date",label:(0,K.jsxs)(g.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:["Timestamp ",o]}),onRemove:t})}function ye(e){var n=e.filter,t=e.closeRef,r=y.useState(null),a=(0,c.Z)(r,2),i=a[0],o=a[1],u=y.useState(null),l=(0,c.Z)(u,2),s=l[0],f=l[1],d=y.useState("startDate"),v=(0,c.Z)(d,2),p=v[0],x=v[1],m=y.useState(!0),h=(0,c.Z)(m,2),k=h[0],b=h[1];return(0,K.jsxs)(se.Vq,{isOpen:k,title:"Select a date range",onClosed:function(){t.current()},style:{width:"652px"},children:[(0,K.jsx)(we,{children:(0,K.jsx)(g.x,{flex:{direction:"row",gap:8},padding:16,children:(0,K.jsx)(ge.DateRangePicker,{onDatesChange:function(e){var n=e.startDate,t=e.endDate;o(n),f(t)},onFocusChange:function(e){e&&x(e)},startDate:i,endDate:s,startDateId:"start",endDateId:"end",focusedInput:p,withPortal:!1,keepOpenOnDateSelect:!0,isOutsideRange:function(){return!1}})})}),(0,K.jsxs)(se.cN,{topBorder:!0,children:[(0,K.jsx)(I.zx,{onClick:function(){b(!1)},children:"Cancel"}),(0,K.jsx)(I.zx,{intent:"primary",disabled:!i||!s,onClick:function(){n.setState([i.valueOf(),s.valueOf()]),b(!1)},children:"Apply"})]})]})}var ke,be,we=C.ZP.div.withConfig({displayName:"useTimeRangeFilter__Container",componentId:"sc-1aw5el5-0"})(["height:430px;input[type='date']::-webkit-calendar-picker-indicator{display:none;}input[type='date']::-moz-calendar-picker-indicator{display:none;}input[type='date']::-ms-calendar-picker-indicator{display:none;}.DayPickerKeyboardShortcuts_show{display:none;}.CalendarDay__hovered_span,.CalendarDay__hovered_span:hover,.CalendarDay__selected_span,.CalendarDay__selected_span:hover{background:",";color:",";border:1px solid #e4e7e7;}.CalendarDay__selected,.CalendarDay__selected:active,.CalendarDay__selected:hover{background:",";border:1px solid #e4e7e7;}.DateInput_input__focused{border-color:",";}"],A.w.Blue50,A.w.Blue700,A.w.Blue200,A.w.Blue500),je=t(92761),Se=t(68506),Ze=[Se.H.Automaterialize,Se.H.SensorName,Se.H.ScheduleName,Se.H.User],Ce=[{token:"id",values:function(){return[]}},{token:"status",values:function(){return[]}},{token:"pipeline",values:function(){return[]}},{token:"job",values:function(){return[]}},{token:"tag",values:function(){return[]}},{token:"snapshotId",values:function(){return[]}},{token:"created_date_before",values:function(){return[]}},{token:"created_date_after",values:function(){return[]}}],_e=Object.keys(b.VOA).map((function(e){return{label:oe(e),value:e,match:[e]}}));function Te(e){return(0,w.q)(y.useMemo((function(){return{encode:function(e){return{q:(0,p.cJ)(e),cursor:void 0}},decode:function(n){var t=n.q,r=void 0===t?[]:t;return(0,p.TC)(r,Ce).filter((function(n){return!n.token||!e||e.includes(n.token)}))}}}),[e]))}function Oe(e){if(!e[0])return{};var n,t={},r=(0,s.Z)(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;if("created_date_before"===a.token)t.createdBefore=parseInt(a.value);else if("created_date_after"===a.token)t.updatedAfter=parseInt(a.value);else if("pipeline"===a.token||"job"===a.token)t.pipelineName=a.value;else if("id"===a.token)t.runIds=t.runIds||[],t.runIds.push(a.value);else if("status"===a.token)t.statuses=t.statuses||[],t.statuses.push(a.value);else if("snapshotId"===a.token)t.snapshotId=a.value;else if("tag"===a.token){var i=a.value.split("="),o=(0,c.Z)(i,2),u=o[0],l=o[1],f=void 0===l?"":l;t.tags?t.tags.push({key:u,value:f}):t.tags=[{key:u,value:f}]}}}catch(d){r.e(d)}finally{r.f()}return t}var De=[].concat(Ze,[Se.H.Backfill]),Ie=function(e){var n=e.tokens,t=e.onChange,r=e.enabledFilters,a=(0,je.vl)().options,v=(0,f.t)(Ae),p=(0,c.Z)(v,2),m=p[0],h=p[1].data,b=(0,d.x)(),w=(0,j.C)().UserDisplay,Z=y.useCallback(function(){var e=(0,l.Z)((0,u.Z)().mark((function e(n){var t,r,a,i,o;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.query({query:Re,variables:{tagKeys:n?[n]:[]}});case 2:if(r=e.sent,"RunTags"!==(null===(a=r.data)||void 0===a||null===(t=a.runTagsOrError)||void 0===t?void 0:t.__typename)){e.next=6;break}return e.abrupt("return",(null===a||void 0===a||null===(i=a.runTagsOrError.tags)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.values.map((function(e){return Me(n,e)})))||[]);case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[b]),C=y.useMemo((function(){var e;return"RunTagKeys"===(null===h||void 0===h||null===(e=h.runTagKeysOrError)||void 0===e?void 0:e.__typename)&&(null===h||void 0===h?void 0:h.runTagKeysOrError.keys.filter((function(e){return!De.includes(e)})).map((function(e){return{final:!1,value:{value:e}}})))||[]}),[h]),_=Ee(Se.H.SensorName),T=(0,c.Z)(_,2),O=T[0],D=T[1],I=Ee(Se.H.ScheduleName),A=(0,c.Z)(I,2),R=A[0],E=A[1],F=Ee(Se.H.User),L=(0,c.Z)(F,2),M=L[0],V=L[1],z=Ee(Se.H.Backfill),J=(0,c.Z)(z,2),P=J[0],H=J[1],U=!r||(null===r||void 0===r?void 0:r.includes("backfill")),B=y.useCallback((function(){m(),O(),R(),M(),U&&P()}),[P,R,O,m,M,U]),G=y.useMemo((function(){return[Fe(Se.H.Automaterialize,"true")].concat((0,o.Z)(D),(0,o.Z)(E),(0,o.Z)(V))}),[D,E,V]),Y=!r||(null===r||void 0===r?void 0:r.includes("job")),q=y.useMemo((function(){var e=[],n=[];if(!Y)return{pipelines:[],jobs:[]};var t,r=(0,s.Z)(a);try{for(r.s();!(t=r.n()).done;){var i,o=t.value.repository,u=(0,s.Z)(o.pipelines);try{for(u.s();!(i=u.n()).done;){var l=i.value;l.isJob?l.name.startsWith(k.u1)||n.push(l.name):e.push(l.name)}}catch(c){u.e(c)}finally{u.f()}}}catch(c){r.e(c)}finally{r.f()}return{pipelines:e.map((function(e){return{key:e,value:e,match:[e]}})),jobs:n.map((function(e){return{key:e,value:e,match:[e]}}))}}),[Y,a]),W=q.pipelines,$=q.jobs,Q=!r||(null===r||void 0===r?void 0:r.includes("job"))&&W.length,X=re({name:"Job",icon:"job",allowMultipleSelections:!1,allValues:$,renderLabel:function(e){var n=e.value;return(0,K.jsxs)(g.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,K.jsx)(x.JO,{name:"job"}),(0,K.jsx)(S.rd,{text:n})]})},getStringValue:function(e){return e},initialState:y.useMemo((function(){return new Set(n.filter((function(e){return"job"===e.token})).map((function(e){return e.value})))}),[n]),onStateChanged:function(e){t([].concat((0,o.Z)(n.filter((function(e){return"job"!==e.token}))),(0,o.Z)(Array.from(e).map((function(e){return{token:"job",value:e}})))))}}),ee=re({name:"Status",icon:"status",allValues:_e,renderLabel:function(e){var n=e.value;return(0,K.jsx)("span",{children:oe(n)})},getStringValue:function(e){return oe(e)},initialState:y.useMemo((function(){return new Set(n.filter((function(e){return"status"===e.token})).map((function(e){return e.value})))}),[n]),onStateChanged:function(e){t([].concat((0,o.Z)(n.filter((function(e){return"status"!==e.token}))),(0,o.Z)(Array.from(e).map((function(e){return{token:"status",value:e}})))))}}),ne=re({name:"Pipelines",icon:"job",allValues:W,allowMultipleSelections:!1,renderLabel:function(e){var n=e.value;return(0,K.jsxs)(g.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,K.jsx)(x.JO,{name:"job"}),(0,K.jsx)(S.rd,{text:n})]})},getStringValue:function(e){return e},initialState:y.useMemo((function(){return new Set(n.filter((function(e){return"job"===e.token})).map((function(e){return e.value})))}),[n]),onStateChanged:function(e){t([].concat((0,o.Z)(n.filter((function(e){return"pipeline"!==e.token}))),(0,o.Z)(Array.from(e).map((function(e){return{token:"pipeline",value:e}})))))}}),te=re({name:"Backfill ID",icon:"backfill",allValues:H,allowMultipleSelections:!1,initialState:y.useMemo((function(){return new Set(n.filter((function(e){var n=e.token,t=e.value;return"tag"===n&&t.split("=")[0]===Se.H.Backfill})).map((function(e){var n=e.value;return Le(n)})))}),[n]),renderLabel:function(e){var n=e.value;return(0,K.jsxs)(g.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,K.jsx)(x.JO,{name:"job"}),(0,K.jsx)(S.rd,{text:n.value})]})},getStringValue:function(e){return e.value},onStateChanged:function(e){t([].concat((0,o.Z)(n.filter((function(e){var n=e.token,t=e.value;return"tag"!==n||t.split("=")[0]!==Se.H.Backfill}))),(0,o.Z)(Array.from(e).map((function(e){return{token:"tag",value:"".concat(e.type,"=").concat(e.value)}})))))}}),ae=function(e){var n=e.filters,t=y.useMemo((function(){return n.filter((function(e){return e.isActive})).map((function(e,n){return(0,K.jsx)(y.Fragment,{children:e.activeJSX},n)}))}),[n]);return{button:y.useMemo((function(){return(0,K.jsx)(N,{filters:n})}),[n]),activeFiltersJsx:t}}({filters:[!r||null!==r&&void 0!==r&&r.includes("status")?ee:null,re({name:"Created By",icon:"add_circle",allValues:G,renderLabel:function(e){var n,t=e.value,r=t.value;if(t.type===Se.H.SensorName)n=(0,K.jsx)(x.JO,{name:"sensors"});else if(t.type===Se.H.ScheduleName)n=(0,K.jsx)(x.JO,{name:"schedule"});else{if(t.type===Se.H.User)return(0,K.jsx)(w,{email:t.value,isFilter:!0});t.type===Se.H.Automaterialize&&(n=(0,K.jsx)(x.JO,{name:"auto_materialize_policy"}),r="Auto-materialize policy")}return(0,K.jsxs)(g.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[n,(0,K.jsx)(S.rd,{text:r})]})},getStringValue:function(e){return e.type===Se.H.Automaterialize?"Auto-materialize policy":e.value},initialState:y.useMemo((function(){return new Set(n.filter((function(e){var n=e.token,t=e.value;return"tag"===n&&Ze.includes(t.split("=")[0])})).map((function(e){var n=e.value;return Le(n)})))}),[n]),onStateChanged:function(e){t([].concat((0,o.Z)(n.filter((function(e){return"tag"!==e.token||!Ze.includes(e.value.split("=")[0])}))),(0,o.Z)(Array.from(e).map((function(e){return{token:"tag",value:"".concat(e.type,"=").concat(e.value)}})))))}}),xe({name:"Created date",icon:"date",timezone:"UTC",initialState:y.useMemo((function(){var e=n.find((function(e){return"created_date_before"===e.token})),t=n.find((function(e){return"created_date_after"===e.token}));return[t?1e3*parseInt(t.value):null,e?1e3*parseInt(e.value):null]}),[n]),onStateChanged:function(e){t([].concat((0,o.Z)(n.filter((function(e){var n;return!["created_date_before","created_date_after"].includes(null!==(n=e.token)&&void 0!==n?n:"")}))),(0,o.Z)([null!=e[0]?{token:"created_date_after",value:"".concat(e[0]/1e3)}:null,null!=e[1]?{token:"created_date_before",value:"".concat(e[1]/1e3)}:null].filter((function(e){return e})))))}}),Y?X:null,Q?ne:null,U?te:null,le({name:"Tag",icon:"tag",initialSuggestions:C,freeformSearchResult:y.useCallback((function(e,n){return(0,i.Z)((0,i.Z)({},Me(n.length?n[0].value:"",e)),{},{final:!!n.length})}),[]),state:y.useMemo((function(){return n.filter((function(e){var n=e.token,t=e.value;return"tag"===n&&!De.includes(t.split("=")[0])})).map((function(e){var n=e.value.split("="),t=(0,c.Z)(n,2),r=t[0],a=t[1];return Me(r,a).value}))}),[n]),setState:function(e){t([].concat((0,o.Z)(n.filter((function(e){var n=e.token,t=e.value;return"tag"!==n||De.includes(t.split("=")[0])}))),(0,o.Z)(e.map((function(e){var n=e.key,t=e.value;return{token:"tag",value:"".concat(n,"=").concat(t)}})))))},onSuggestionClicked:function(){var e=(0,l.Z)((0,u.Z)().mark((function e(n){var t;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.value,e.next=3,Z(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),getStringValue:function(e){var n=e.key,t=e.value;return"".concat(n,"=").concat(t)},getKey:function(e){var n=e.key,t=e.value;return"".concat(n,": ").concat(t)},renderLabel:function(e){var n=e.value;return(0,K.jsxs)(g.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,K.jsx)(x.JO,{name:"tag"}),(0,K.jsx)(S.rd,{text:n.value})]})},renderActiveStateLabel:function(e){var n=e.value;return(0,K.jsxs)(g.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,K.jsx)(x.JO,{name:"tag"}),(0,K.jsx)(S.rd,{text:"".concat(n.key,"=").concat(n.value)}),n.key,"=",n.value]})},isMatch:function(e,n){return e.value.toLowerCase().includes(n.toLowerCase())},matchType:"all-of"})].filter((function(e){return e}))}),ie=ae.button,ue=ae.activeFiltersJsx;return{button:(0,K.jsx)("span",{onClick:B,children:ie}),activeFiltersJsx:ue}},Ae=(0,v.Ps)(ke||(ke=(0,a.Z)(["\n  query RunTagKeysNewQuery {\n    runTagKeysOrError {\n      ... on RunTagKeys {\n        keys\n      }\n    }\n  }\n"]))),Re=(0,v.Ps)(be||(be=(0,a.Z)(["\n  query RunTagValuesNewQuery($tagKeys: [String!]!) {\n    runTagsOrError(tagKeys: $tagKeys) {\n      ... on RunTags {\n        tags {\n          key\n          values\n        }\n      }\n    }\n  }\n"])));function Ee(e){var n=(0,f.t)(Re,{variables:{tagKeys:e?[e]:[]}}),t=(0,c.Z)(n,2),r=t[0],a=t[1].data;return[r,y.useMemo((function(){var n;return e&&"RunTags"===(null===a||void 0===a||null===(n=a.runTagsOrError)||void 0===n?void 0:n.__typename)?a.runTagsOrError.tags.map((function(e){return e.values})).flat().map((function(n){return Fe(e,n)})):[]}),[a,e])]}function Fe(e,n){return{label:n,value:Le("".concat(e,"=").concat(n)),match:[n]}}var Le=h()((function(e){return{key:e,type:e.split("=")[0],value:e.split("=")[1]}})),Me=h()((function(e,n){return{final:!0,value:{key:e,value:n}}}),(function(e,n){return"".concat(e,":").concat(n)}))},67445:function(e,n,t){t.d(n,{t:function(){return c}});t(78193);var r=t(47515),a=t(32667),i=t(58507),o=t(62459),u=t(83473),l=t(35936),c=function(e){var n=e.title,t=e.description,c=e.icon,s=e.action,f=e.shrinkable,d=1===[n,t,s].filter(Boolean).length;return(0,l.jsxs)(r.x,{flex:{gap:20,alignItems:d?"center":"flex-start"},background:a.w.Gray50,padding:24,style:{margin:"auto",borderRadius:8,width:f?"initial":"max-content",maxWidth:500},children:["spinner"===c?(0,l.jsx)(o.$,{purpose:"section"}):"no-results"===c?(0,l.jsx)(i.JO,{name:"search",size:48,color:a.w.Gray400}):(0,l.jsx)(i.JO,{name:c,size:48,color:a.w.Gray400}),(0,l.jsxs)(r.x,{flex:{gap:8,direction:"column",alignItems:"flex-start"},children:[n&&(0,l.jsx)(u.pm,{style:{color:a.w.Gray900},children:n}),t&&(0,l.jsx)("div",{style:{color:a.w.Gray500},children:t}),s]})]})}},29845:function(e,n,t){t.d(n,{Gf:function(){return j},HE:function(){return x},HY:function(){return k},TC:function(){return m},WD:function(){return y},cJ:function(){return b},jP:function(){return w}});var r=t(41361),a=t(68079),i=t(96234),o=t(60319),u=t(80018),l=t(78193),c=t(47515),s=t(32667),f=t(85357),d=t(73070),v=t(62459),p=t(35936);function g(e,n){return n.find((function(n){return n.token&&n.token.toLowerCase()===e.toLowerCase()}))}var x=function(e,n){if(""===e)return[];var t=e.split(",");return m(t,n)},m=function(e,n){return e.map((function(e){return y(e,n)}))},h=function(e){var n=e.indexOf(":");return-1===n?[e,""]:[e.slice(0,n),e.slice(n+1)]};function y(e,n){var t=h(e),r=(0,i.Z)(t,2),a=r[0],o=r[1];return g(a,n)&&a&&o?{token:a,value:o}:{value:e}}var k=function(e){return e.token?"".concat(e.token,":").concat(e.value):e.value},b=function(e){return e.filter((function(e){return""!==e.value})).map(k)},w=function(e){return b(e).join(",")},j=function(e){var n,t,o=e.suggestionProviders,u=e.suggestionProvidersFilter,s=e.values,x=e.maxValues,m=e.onChange,h=e.onChangeBeforeCommit,k=e.onFocus,b=e.onTextChange,w=e.placeholder,j=e.addOnBlur,C=e.loading,_=e.className,T=e.fullwidth,O=e.suggestionRenderer,D=l.useState(!1),I=(0,i.Z)(D,2),A=I[0],R=I[1],E=l.useState(null),F=(0,i.Z)(E,2),L=F[0],M=F[1],V=l.useState(""),K=(0,i.Z)(V,2),z=K[0],J=K[1],N=l.useMemo((function(){return(0,a.Z)(s)}),[s]),P=y(z,o);n=P,(t=N[N.length-1])&&n.token===t.token&&n.value===t.value&&N.pop();var H=void 0!==x&&N.length>=x,U=u?u(o,N):o,B=z.split(":"),G=(B[B.length-1]||"").toLowerCase(),Y=l.useMemo((function(){if(H)return[];var e=[],n=function(e,n){return!e||n.text.toLowerCase().split(":").some((function(n){return n.includes(e)}))},t=function(e){var t=e.suggestionFilter||n;return e.values().filter((function(n){return!N.some((function(t){return t.token===e.token&&t.value===n}))})).map((function(n){return{text:null!==e&&void 0!==e&&e.token?"".concat(e.token,":").concat(n):n,final:!e.textOnly}})).filter((function(e){return t(G,e)})).slice(0,100)};if(1===B.length){e=U.reduce((function(e,n){return n.token?[].concat((0,a.Z)(e),[{text:"".concat(n.token,":"),final:!1}]):e}),[]).filter((function(e){return n(G,e)}));var i,o=(0,r.Z)(U);try{for(o.s();!(i=o.n()).done;){var u,l=i.value;if(!l.token||z.length>0)(u=e).push.apply(u,(0,a.Z)(t(l)))}}catch(f){o.e(f)}finally{o.f()}}if(2===B.length){var c=B[0];if(c){var s=g(c,U);e=s?t(s):[]}}return e.sort((function(e,n){return e.text.localeCompare(n.text)})),e}),[H,U,G,B,z.length,N]),q=function(e){J(e),b&&b(e)};l.useEffect((function(){if(L||!Y.length){if(L)if(0!==Y.length){var e=Y.findIndex((function(e){return e.text===L.text})),n=-1!==e?e:L.idx;n=Math.max(0,Math.min(Y.length-1,n));var t=Y[n];!t||n===L.idx&&t.text===L.text||M({text:t.text,idx:n})}else M(null)}else{var r=Y[0];r&&M({text:r.text,idx:0})}}),[L,Y]);var W=function(e){H||(e.final?($(e.text),q(""),M(null),R(!1)):q(e.text))},$=function(e){H||e.endsWith(":")||""!==e&&(q(""),m([].concat((0,a.Z)(N),[y(e,U)])))},Q=l.createRef();l.useEffect((function(){if(Q.current&&L){var e=Q.current.querySelector("[data-idx='".concat(L.idx,"']"));e&&e instanceof HTMLElement&&"scrollIntoView"in e&&e.scrollIntoView({block:"nearest"})}}),[Q,L]);var X=O||function(e){return e.text};return(0,p.jsx)(d.J,{isOpen:A&&Y.length>0&&!H,position:"bottom-left",content:Y.length>0?(0,p.jsx)("div",{style:{maxHeight:235,overflowY:"scroll"},ref:Q,children:(0,p.jsx)(Z,{children:Y.map((function(e,n){return(0,p.jsx)(f.sN,{"data-idx":n,text:X(e),shouldDismissPopover:!1,active:(null===L||void 0===L?void 0:L.idx)===n,onMouseDown:function(n){n.preventDefault(),n.stopPropagation(),W(e),M(null)}},e.text)}))})}):(0,p.jsx)("div",{}),children:(0,p.jsx)(S,{className:_,values:N.map((function(e){return e.token?"".concat(e.token,":").concat(e.value):e.value})),inputValue:z,onRemove:function(e,n){var t=(0,a.Z)(N);t.splice(n,1),m(t)},onInputChange:function(e){if(q(e.currentTarget.value),h){var n=y(e.currentTarget.value,U);m([].concat((0,a.Z)(N),[n]))}},inputProps:{onFocus:function(){R(!0),k&&k()},onBlur:function(){j&&$(z),R(!1)}},$maxWidth:T?"100%":void 0,onAdd:function(){return!1},onKeyDown:function(e){if(H&&"Delete"!==e.key&&"Backspace"!==e.key)return e.preventDefault(),void e.stopPropagation();if("Enter"!==e.key&&"Return"!==e.key&&"Tab"!==e.key){if(" "===e.key)return e.preventDefault(),void $(z);if("Escape"===e.key)return M(null),void R(!1);A||"Delete"===e.key||"Backspace"===e.key||R(!0);var n={ArrowDown:1,ArrowUp:-1}[e.key];if(n&&Y.length>0){e.preventDefault();var t=(L?L.idx:-1)+n;t=Math.max(0,Math.min(t,Y.length-1));var r=Y[t];r&&M({text:r.text,idx:t})}}else if(L){var a=Y.find((function(e){return e.text===L.text}));if(!a)throw new Error("Selection out of sync with suggestions");W(a),e.preventDefault(),e.stopPropagation()}else z.length&&($(z),e.preventDefault(),e.stopPropagation())},tagProps:{minimal:!0},placeholder:w||"Filter\u2026",rightElement:C&&A?(0,p.jsx)(c.x,{style:{alignSelf:"center"},margin:{right:4},children:(0,p.jsx)(v.$,{purpose:"body-text"})}):void 0})})},S=(0,o.ZP)(u.EG).withConfig({displayName:"TokenizingField__StyledTagInput",componentId:"sc-1ah04ip-0"})(["border:none;border-radius:8px;box-shadow:"," inset 0px 0px 0px 1px,"," inset 2px 2px 1.5px;min-width:400px;max-width:",";transition:box-shadow 150ms;&.bp4-active{box-shadow:"," inset 0px 0px 0px 1px,"," inset 2px 2px 1.5px,rgba(58,151,212,0.6) 0 0 0 3px;}input{font-size:14px;font-weight:400;padding-left:4px;padding-bottom:2px;padding-top:2px;}&& .bp4-tag-input-values:first-child .bp4-input-ghost:first-child{padding-left:8px;}&& .bp4-tag-input-values{margin-right:4px;margin-top:4px;}&& .bp4-tag-input-values > *{margin-bottom:4px;}.bp4-tag{border-radius:6px;display:inline-flex;flex-direction:row;font-size:12px;line-height:16px;align-items:center;max-width:400px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;padding:4px 8px;user-select:none;}.bp4-tag.bp4-minimal:not([class*='bp4-intent-']){background-color:",";color:",";}.bp4-tag.bp4-minimal.bp4-intent-success{background-color:",";color:",";}.bp4-tag.bp4-minimal.bp4-intent-warning{background-color:",";color:",";}.bp4-tag.bp4-minimal.bp4-intent-danger{background-color:",";color:",";}"],s.w.Gray300,s.w.KeylineGray,(function(e){return e.$maxWidth?e.$maxWidth:"600px"}),s.w.Gray300,s.w.KeylineGray,s.w.Gray100,s.w.Gray900,s.w.Green50,s.w.Green700,s.w.Yellow50,s.w.Yellow700,s.w.Red50,s.w.Red700),Z=(0,o.ZP)(f.v2).withConfig({displayName:"TokenizingField__StyledMenu",componentId:"sc-1ah04ip-1"})(["width:400px;"])}}]);
//# sourceMappingURL=158.09bcd125.chunk.js.map