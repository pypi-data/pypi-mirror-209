import{S as e,U as m,aT as O,aU as q,r as M,aV as R,a5 as A,O as F,aW as W,a0 as v}from"./index-2ae943fc.js";function P({progress:a=0,delay:r=0,duration:t=0,className:n}){return e.jsx("div",{className:m("w-full h-1 bg-neutral-30 overflow-hidden flex items-center rounded-lg my-1",n),children:e.jsx("div",{className:"transition-[width] h-full bg-success-500 rounded-lg",style:{width:`${a}%`,transitionDelay:`${r}ms`,transitionDuration:`${t}ms`}})})}var C={},G={get exports(){return C},set exports(a){C=a}};(function(a,r){(function(t,n){typeof O=="function"?a.exports=n():t.pluralize=n()})(q,function(){var t=[],n=[],d={},$={},p={};function g(s){return typeof s=="string"?new RegExp("^"+s+"$","i"):s}function f(s,i){return s===i?i:s===s.toLowerCase()?i.toLowerCase():s===s.toUpperCase()?i.toUpperCase():s[0]===s[0].toUpperCase()?i.charAt(0).toUpperCase()+i.substr(1).toLowerCase():i.toLowerCase()}function b(s,i){return s.replace(/\$(\d{1,2})/g,function(x,u){return i[u]||""})}function c(s,i){return s.replace(i[0],function(x,u){var h=b(i[1],arguments);return f(x===""?s[u-1]:x,h)})}function l(s,i,x){if(!s.length||d.hasOwnProperty(s))return i;for(var u=x.length;u--;){var h=x[u];if(h[0].test(i))return c(i,h)}return i}function y(s,i,x){return function(u){var h=u.toLowerCase();return i.hasOwnProperty(h)?f(u,h):s.hasOwnProperty(h)?f(u,s[h]):l(h,u,x)}}function w(s,i,x,u){return function(h){var k=h.toLowerCase();return i.hasOwnProperty(k)?!0:s.hasOwnProperty(k)?!1:l(k,k,x)===k}}function o(s,i,x){var u=i===1?o.singular(s):o.plural(s);return(x?i+" ":"")+u}return o.plural=y(p,$,t),o.isPlural=w(p,$,t),o.singular=y($,p,n),o.isSingular=w($,p,n),o.addPluralRule=function(s,i){t.push([g(s),i])},o.addSingularRule=function(s,i){n.push([g(s),i])},o.addUncountableRule=function(s){if(typeof s=="string"){d[s.toLowerCase()]=!0;return}o.addPluralRule(s,"$0"),o.addSingularRule(s,"$0")},o.addIrregularRule=function(s,i){i=i.toLowerCase(),s=s.toLowerCase(),p[s]=i,$[i]=s},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["passerby","passersby"]].forEach(function(s){return o.addIrregularRule(s[0],s[1])}),[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|t[lm]as|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/\b((?:tit)?m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach(function(s){return o.addPluralRule(s[0],s[1])}),[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/\b((?:tit)?m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i,"$1"],[/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach(function(s){return o.addSingularRule(s[0],s[1])}),["adulthood","advice","agenda","aid","aircraft","alcohol","ammo","analytics","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","firmware","flounder","fun","gallows","garbage","graffiti","hardware","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","mud","manga","news","only","personnel","pike","plankton","pliers","police","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","software","species","staff","swine","tennis","traffic","transportation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/pok[eÃ©]mon$/i,/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach(o.addUncountableRule),o})})(G);const H=C,j=function({children:r,setRefTasksOverview:t,tasks:n}){const{models:d,taskCompleted:$,taskTotal:p,batchesTotal:g,batchesCompleted:f}=M.useMemo(()=>{const b=Object.entries(n),c=b.length;let l=0,y=0,w=0;return b.forEach(([o,{completed:s,total:i}])=>{l=s===i?l+1:l,y+=i,w+=s}),{models:b,taskCompleted:l,taskTotal:c,batchesTotal:y,batchesCompleted:w}},[n]);return e.jsx("div",{className:"text-prose",ref:t,children:r({models:d,completed:$,total:p,totalBatches:g,completedBatches:f})})};function V({className:a,headline:r,environment:t,planState:n,completed:d,total:$,updatedAt:p,updateType:g,completedBatches:f,totalBatches:b}){return e.jsx(z,{className:a,children:e.jsxs(D,{children:[e.jsxs(S,{children:[e.jsx(U,{children:e.jsx(B,{headline:r,environment:t,planState:n})}),e.jsxs(I,{children:[e.jsx(N,{completed:d,total:$,unit:"task"}),e.jsx(T,{}),e.jsx(N,{completed:f,total:b,unit:"batches"}),e.jsx(T,{}),e.jsx(L,{completed:f,total:b})]})]}),e.jsx(P,{progress:R(f,b)}),p!=null&&e.jsx(Q,{updatedAt:p,updateType:g})]})})}function _({models:a,className:r,changes:t,showBatches:n=!0,showProgress:d=!0,showVirtualUpdate:$=!1}){const{changesAdded:p,changesRemoved:g,changesModifiedDirect:f,changesModifiedIndirect:b}=M.useMemo(()=>{const c=t==null?void 0:t.modified;return{changesAdded:(t==null?void 0:t.added)??[],changesRemoved:(t==null?void 0:t.removed)??[],changesModifiedMetadata:(c==null?void 0:c.metadata)??[],changesModifiedIndirect:((c==null?void 0:c.indirect)??[]).map(({model_name:l})=>l),changesModifiedDirect:((c==null?void 0:c.direct)??[]).map(({model_name:l})=>l)}},[t]);return e.jsx(z,{className:r,children:e.jsx(E,{models:a,children:([c,l])=>e.jsxs(D,{children:[e.jsxs(S,{children:[e.jsxs(U,{children:[l.interval!=null&&e.jsx(J,{start:l.interval[0],end:l.interval[1]}),e.jsx(X,{modelName:c,changeType:Y({modelName:c,changesAdded:p,changesRemoved:g,changesModifiedDirect:f,changesModifiedIndirect:b})})]}),e.jsxs(I,{children:[n&&e.jsx(N,{completed:l.completed,total:l.total,unit:"batch"}),e.jsx(T,{}),d&&e.jsx(e.Fragment,{children:l.end==null||l.start==null?e.jsx(L,{total:l.total,completed:l.completed}):e.jsx(K,{start:l.start,end:l.end})}),$&&e.jsx("span",{className:"inline-block whitespace-nowrap font-bold ml-2",children:"Updated"})]})]}),d?e.jsx(P,{progress:R(l.completed,l.total)}):e.jsx(A,{className:"my-1 border-neutral-200 opacity-50"})]})})})}function z({className:a,children:r}){return e.jsx("div",{className:m("my-3 mx-4 max-h-[50vh] overflow-auto scrollbar scrollbar--vertical scrollbar--horizontal",a),children:r})}function D({className:a,children:r}){return e.jsx("div",{className:m("px-4",a),children:r})}function E({className:a,models:r,children:t}){return e.jsx("ul",{className:m("bg-neutral-10 rounded-lg py-4 overflow-auto text-prose scrollbar scrollbar--vertical scrollbar--horizontal",a),children:r.map(([n,d])=>e.jsx("li",{className:"mb-2",children:t([n,d])},n))})}function S({className:a,children:r}){return e.jsx("div",{className:m("flex sm:justify-between sm:items-baseline text-xs",a),children:r})}function B({className:a,headline:r,environment:t,planState:n}){return e.jsxs("span",{className:m("flex items-center",a),children:[e.jsx("span",{className:"block whitespace-nowrap text-sm font-medium",children:r}),e.jsx("small",{className:"inline-block ml-1 px-2 py-[0.125rem] text-xs font-bold bg-neutral-10 rounded-md",children:t}),n!==F.Init&&e.jsxs(e.Fragment,{children:[e.jsx(T,{}),e.jsx("small",{className:"ml-1",children:n})]})]})}function U({className:a,children:r}){return e.jsx("div",{className:m("flex mr-6 w-full sm:w-auto overflow-hidden",a),children:r})}function I({className:a,children:r}){return e.jsx("div",{className:m("flex items-center",a),children:r})}function J({className:a,start:r,end:t}){return e.jsxs("span",{className:m("inline-block mr-2 whitespace-nowrap font-mono",a),children:[r,"Â âÂ ",t]})}function N({className:a,total:r,completed:t,unit:n}){return e.jsxs("span",{className:m("inline-block whitespace-nowrap",a),children:[t," of ",r," ",H(n,r)]})}function T({className:a}){return e.jsx("span",{className:m("inline-block mx-2",a),children:"|"})}function L({className:a,total:r,completed:t}){return e.jsxs("span",{className:m("inline-block whitespace-nowrap font-bold",a),children:[Math.ceil(R(t,r)),"%"]})}function K({className:a,start:r,end:t}){return e.jsx("span",{className:m("inline-block whitespace-nowrap font-bold",a),children:`${Math.floor((t-r)/6e4)}:${String(Math.ceil((t-r)/1e3%60)).padStart(2,"0")}`})}function Q({updateType:a,updatedAt:r}){return e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsxs("small",{className:"text-xs",children:[e.jsx("b",{children:"Update Type:"}),e.jsx("span",{className:"inline-block ml-1",children:a})]}),e.jsxs("small",{className:"text-xs",children:[e.jsx("b",{children:"Last Update:"}),e.jsx("span",{className:"inline-block ml-1",children:W(new Date(r),"yyyy-mm-dd hh-mm-ss",!1)})]})]})}function X({className:a,modelName:r,changeType:t}){return e.jsx("span",{className:m("font-bold whitespace-nowrap",t===v.Add&&"text-success-600  dark:text-success-500",t===v.Remove&&"text-danger-500",t===v.Direct&&"text-secondary-500 dark:text-primary-500",t===v.Indirect&&"text-warning-500",t===v.Metadata&&"text-prose",a),children:r})}j.Block=z;j.Summary=V;j.Details=_;j.Task=D;j.Tasks=E;const ee=j;function Y({modelName:a,changesAdded:r,changesRemoved:t,changesModifiedDirect:n,changesModifiedIndirect:d}){return r.includes(a)?v.Add:t.includes(a)?v.Remove:n.includes(a)?v.Direct:d.includes(a)?v.Indirect:v.Metadata}export{ee as T,H as p};
