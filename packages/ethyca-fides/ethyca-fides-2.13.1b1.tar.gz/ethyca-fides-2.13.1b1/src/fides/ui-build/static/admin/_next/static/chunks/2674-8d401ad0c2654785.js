"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2674],{44204:function(e,n,t){var r=t(90849),i=t(90089),o=t(20294),a=t(24246),s=["data","border"];function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){var n=e.data,t=e.border,r=void 0===t?"partial":t,c=(0,i.Z)(e,s);return(0,a.jsxs)(o.mQ,l(l({colorScheme:"complimentary"},c),{},{children:[(0,a.jsx)(o.td,{width:"partial"===r?"max-content":void 0,children:n.map((function(e,n){return(0,a.jsx)(o.OK,{"data-testid":"tab-".concat(e.label),_selected:{fontWeight:"600",color:"complimentary.500",borderColor:"complimentary.500"},fontSize:c.fontSize,fontWeight:"500",color:"gray.500",isDisabled:e.isDisabled||!1,children:e.label},n)}))}),(0,a.jsx)(o.nP,{children:n.map((function(e,n){return(0,a.jsx)(o.x4,{px:0,"data-testid":"tab-panel-".concat(e.label),children:e.content},n)}))})]}))}},35100:function(e,n,t){t.d(n,{Z:function(){return j}});var r=t(55732),i=t(97865),o=t(34707),a=t.n(o),s=t(34896),c=t(29549),l=t(5008),u=t(29470),d=t(79894),f=t.n(d),p=(t(27378),{src:"/_next/static/media/logo.c87f81b9.svg",height:64,width:209}),h=t(6848),x=t(10141),m=t(45802),g=t(56169),v=t(24246),j=function(){var e=function(){var e;return{username:(null!==(e=(0,h.C)(m.dy))&&void 0!==e?e:{username:""}).username}}().username,n=(0,m._y)(),t=(0,i.Z)(n,1)[0],o=(0,h.T)(),d=function(){var e=(0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({});case 2:o((0,m.kS)());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,v.jsxs)(s.kC,{as:"header",height:12,width:"100%",paddingX:10,flexShrink:0,justifyContent:"space-between",alignItems:"center",backgroundColor:"gray.50",children:[(0,v.jsx)(f(),{href:x.gp,passHref:!0,children:(0,v.jsx)(s.rU,{display:"flex",children:(0,v.jsx)(g.Z,{src:p,width:83,height:26,alt:"Fides Logo"})})}),(0,v.jsxs)(s.kC,{alignItems:"center",children:[(0,v.jsx)(s.rU,{href:"https://docs.ethyca.com",isExternal:!0,children:(0,v.jsx)(c.zx,{size:"sm",variant:"ghost",children:(0,v.jsx)(l.UO,{color:"gray.700",boxSize:4})})}),e&&(0,v.jsxs)(u.v2,{children:[(0,v.jsx)(u.j2,{as:c.zx,size:"sm",variant:"ghost","data-testid":"header-menu-button",children:(0,v.jsx)(l.tB,{color:"gray.700"})}),(0,v.jsxs)(u.qy,{shadow:"xl",children:[(0,v.jsx)(s.Kq,{px:3,py:2,spacing:1,children:(0,v.jsx)(s.xv,{fontWeight:"medium",children:e})}),(0,v.jsx)(u.R,{}),(0,v.jsx)(u.sN,{_focus:{color:"complimentary.500",bg:"gray.100"},onClick:d,"data-testid":"header-menu-sign-out",children:"Sign out"})]})]})]})]})}},51471:function(e,n,t){t.d(n,{Z:function(){return m}});var r=t(34896),i=t(88038),o=t.n(i),a=t(86677),s=(t(27378),t(90768)),c=t(35100),l=t(64989),u=t(48114),d=t(51365),f=t(29549),p=t(60709),h=t(24246),x=function(){var e=(0,a.useRouter)();return(0,h.jsx)(r.xu,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,h.jsxs)(r.xu,{children:[(0,h.jsxs)(r.Kq,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,h.jsx)(r.xv,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,h.jsx)(f.zx,{size:"sm",variant:"outline",onClick:function(){e.push(p.fz)},children:"Configure"})]}),(0,h.jsxs)(r.xv,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},m=function(e){var n=e.children,t=e.title,i=(0,s.hz)(),f=(0,a.useRouter)(),p="/privacy-requests"===f.pathname||"/datastore-connection"===f.pathname,m=!(i.flags.privacyRequestsConfiguration&&p),g=(0,d.JE)(void 0,{skip:m}).data,v=(0,d.PW)(void 0,{skip:m}).data,j=i.flags.privacyRequestsConfiguration&&(!g||!v)&&p;return(0,h.jsxs)(r.kC,{"data-testid":t,direction:"column",children:[(0,h.jsxs)(o(),{children:[(0,h.jsxs)("title",{children:["Fides Admin UI - ",t]}),(0,h.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,h.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,h.jsx)(c.Z,{}),(0,h.jsx)(u.Z,{}),(0,h.jsxs)(r.kC,{as:"main",flexGrow:1,padding:10,gap:10,children:[(0,h.jsx)(r.xu,{flex:0,flexShrink:0,children:(0,h.jsx)(l.U,{})}),(0,h.jsxs)(r.kC,{direction:"column",flex:1,minWidth:0,children:[j?(0,h.jsx)(x,{}):null,n]})]})]})}},78624:function(e,n,t){t.d(n,{D4:function(){return r.D4},MM:function(){return l},Ot:function(){return a},e$:function(){return o},nU:function(){return c},tB:function(){return s}});var r=t(60041),i="An unexpected error occurred. Please try again.",o=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;if((0,r.Bw)(e)){if((0,r.hE)(e.data))return e.data.detail;if((0,r.cz)(e.data)){var t,o=null===(t=e.data.detail)||void 0===t?void 0:t[0];return"".concat(null===o||void 0===o?void 0:o.msg,": ").concat(null===o||void 0===o?void 0:o.loc)}if(409===e.status&&(0,r.Dy)(e.data))return"".concat(e.data.detail.error," (").concat(e.data.detail.fides_key,")");if(404===e.status&&(0,r.XD)(e.data))return"".concat(e.data.detail.error," (").concat(e.data.detail.fides_key,")")}return n};function a(e){return"object"===typeof e&&null!=e&&"data"in e&&"string"===typeof e.data.detail}function s(e){return"object"===typeof e&&null!=e&&"data"in e&&Array.isArray(e.data.detail)}var c=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{status:500,message:i};if((0,r.oK)(e))return{status:e.originalStatus,message:e.data};if((0,r.Bw)(e)){var t=e.status;return{status:t,message:o(e,n.message)}}return n},l=function(e){return Object.entries(e).map((function(e){return{value:e[1],label:e[1]}}))}},9408:function(e,n,t){t.d(n,{HK:function(){return o},VY:function(){return r.V}});var r=t(36653),i=t(78624),o=function(){var e=(0,r.V)().errorAlert;return{handleError:function(n){var t="An unexpected error occurred. Please try again.";(0,i.Ot)(n)?t=n.data.detail:(0,i.tB)(n)&&(t=n.data.detail[0].msg),e(t)}}};t(27378)},36653:function(e,n,t){t.d(n,{V:function(){return d}});var r=t(90849),i=t(70409),o=t(23286),a=t(34896),s=t(93235),c=t(24246);function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var d=function(){var e=(0,i.pm)();return{errorAlert:function(n,t,r){var i=u(u({},r),{},{position:(null===r||void 0===r?void 0:r.position)||"top",render:function(e){var r=e.onClose;return(0,c.jsxs)(o.bZ,{alignItems:"normal",status:"error",children:[(0,c.jsx)(o.zM,{}),(0,c.jsxs)(a.xu,{children:[t&&(0,c.jsx)(o.Cd,{children:t}),(0,c.jsx)(o.X,{children:n})]}),(0,c.jsx)(s.P,{onClick:r,position:"relative",right:0,size:"sm",top:-1})]})}});null!==r&&void 0!==r&&r.id&&e.isActive(r.id)?e.update(r.id,i):e(i)},successAlert:function(n,t,r){var i=u(u({},r),{},{position:(null===r||void 0===r?void 0:r.position)||"top",render:function(e){var r=e.onClose;return(0,c.jsxs)(o.bZ,{alignItems:"normal",status:"success",variant:"subtle",children:[(0,c.jsx)(o.zM,{}),(0,c.jsxs)(a.xu,{children:[t&&(0,c.jsx)(o.Cd,{children:t}),(0,c.jsx)(o.X,{children:n})]}),(0,c.jsx)(s.P,{onClick:r,position:"relative",right:0,size:"sm",top:-1})]})}});null!==r&&void 0!==r&&r.id&&e.isActive(r.id)?e.update(r.id,i):e(i)}}}},23402:function(e,n,t){t.d(n,{TL:function(){return f},UI:function(){return d}});var r=t(90849),i=t(9198),o=t(79894),a=t.n(o),s=(t(27378),t(24246));function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var u=function(e){var n=e.variant,t=e.children,r=e.href,o=e.isActive,c=e.isDisabled,l="primary"===n?i.c2:i._p;return c?(0,s.jsx)(l,{isDisabled:c,href:r,isActive:o,children:t}):(0,s.jsx)(a(),{href:r,passHref:!0,children:(0,s.jsx)(l,{isActive:o,children:t})})},d=function(e){return(0,s.jsx)(u,l({variant:"primary"},e))},f=function(e){return(0,s.jsx)(u,l({variant:"secondary"},e))}},64989:function(e,n,t){t.d(n,{U:function(){return m}});var r=t(90089),i=t(90849),o=t(9198),a=t(34896),s=t(86677),c=(t(27378),t(57589)),l=t(23402),u=t(24246),d=["routerPathname"];function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?f(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var h=function e(n){var t=n.title,r=n.path,i=n.children,o=n.routerPathname,s=o.startsWith(r);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(l.TL,{href:r,isActive:s,children:t}),i.length?(0,u.jsx)(a.QI,{py:.5,children:i.map((function(n){return(0,u.jsx)(a.HC,{listStyleType:"none",children:(0,u.jsx)(e,p({routerPathname:o},n))},n.title)}))}):null]})},x=function(e){var n=e.routerPathname,t=(0,r.Z)(e,d);return t.active?(0,u.jsxs)(a.gC,{as:"nav",align:"left",spacing:4,width:"200px",children:[(0,u.jsx)(a.X6,{size:"md",children:t.active.title}),(0,u.jsx)(o.$6,{children:t.active.children.map((function(e){return(0,u.jsx)(h,p({routerPathname:n},e),e.title)}))})]}):null},m=function(){var e=(0,s.useRouter)(),n=(0,c.Y)({path:e.pathname});return(0,u.jsx)(x,p({routerPathname:e.pathname},n))}},48114:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(34896),i=t(86677),o=(t(27378),t(57589)),a=t(23402),s=t(24246),c=function(){var e=(0,i.useRouter)(),n=(0,o.Y)({path:e.pathname});return(0,s.jsx)(r.kC,{as:"nav",height:12,paddingX:10,gap:1,flexShrink:0,alignItems:"center",borderBottom:"1px",borderColor:"gray.100",children:n.groups.map((function(e){var t,r=e.children[0].path,i=e.title===(null===(t=n.active)||void 0===t?void 0:t.title);return(0,s.jsx)(a.UI,{href:r,isActive:i,children:e.title},e.title)}))})}},40695:function(e,n,t){var r=t(21295),i=t(34896),o=t(30794),a=t(5008),s=(t(27378),t(24246));n.Z=function(e){var n=e.isEmptyState,t=e.yamlError;return(0,s.jsx)(r.Rg,{in:!0,children:(0,s.jsxs)(i.xu,{w:"fit-content",children:[(0,s.jsx)(i.iz,{color:"gray.100"}),(0,s.jsxs)(i.Ug,{mt:"16px",children:[(0,s.jsx)(i.X6,{as:"h5",color:"gray.700",size:"xs",children:"YAML"}),(0,s.jsx)(o.Vp,{colorScheme:"red",size:"sm",variant:"solid",children:"Error"})]}),(0,s.jsx)(i.xu,{bg:"red.50",border:"1px solid",borderColor:"red.300",color:"red.300",mt:"16px",borderRadius:"6px",children:(0,s.jsxs)(i.Ug,{alignItems:"flex-start",margin:["14px","17px","14px","17px"],children:[(0,s.jsx)(a.f9,{}),n&&(0,s.jsxs)(i.xu,{children:[(0,s.jsx)(i.X6,{as:"h5",color:"red.500",fontWeight:"semibold",size:"xs",children:"Error message:"}),(0,s.jsx)(i.xv,{color:"gray.700",fontSize:"sm",fontWeight:"400",children:"Yaml system is required"})]}),t&&(0,s.jsxs)(i.xu,{children:[(0,s.jsx)(i.X6,{as:"h5",color:"red.500",fontWeight:"semibold",size:"xs",children:"Error message:"}),(0,s.jsx)(i.xv,{color:"gray.700",fontSize:"sm",fontWeight:"400",children:t.message}),(0,s.jsx)(i.xv,{color:"gray.700",fontSize:"sm",fontWeight:"400",children:t.reason}),(0,s.jsxs)(i.xv,{color:"gray.700",fontSize:"sm",fontWeight:"400",children:["Ln ",(0,s.jsx)("b",{children:t.mark.line}),", Col"," ",(0,s.jsx)("b",{children:t.mark.column}),", Pos"," ",(0,s.jsx)("b",{children:t.mark.position})]})]})]})})]})})}},16473:function(e,n,t){t.d(n,{F:function(){return a},M:function(){return o}});var r=t(76649),i=t(65218),o=t.n(i)()((function(){return t.e(7088).then(t.bind(t,57088)).then((function(e){return e.default}))}),{ssr:!1,loadableGenerated:{webpack:function(){return[57088]}}}),a=function(e){return(0,r.Ln)({name:"string"},e)&&"YAMLException"===e.name}},43890:function(e,n,t){t.d(n,{Z:function(){return x}});var r=t(90849),i=t(97865),o=t(73679),a=t(90089),s=t(46213),c=(t(27378),t(21023)),l=t(77986),u=function(e){return void 0!==e.connection_type},d=function(e){return void 0!==e.encoded_icon},f=t(24246),p=["data"];function h(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}var x=function(e){var n=e.data,t=(0,a.Z)(e,p);return(0,f.jsx)(s.Ee,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?h(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({boxSize:"32px",objectFit:"cover",src:function(){if(d(n)&&n.encoded_icon)return"data:image/svg+xml;base64,".concat(n.encoded_icon);var e;if(u(n))e=(0,o.Z)(l.iW).find((function(e){var t,r,o=(0,i.Z)(e,1)[0];return n.connection_type.toString()!==c.Rj.SAAS&&n.connection_type.toString()===o||n.connection_type.toString()===c.Rj.SAAS&&(null===(t=n.saas_config)||void 0===t||null===(r=t.type)||void 0===r?void 0:r.toString())===o.toString()}));else if(d(n)){var t=n.identifier;e=(0,o.Z)(l.iW).find((function(e){return(0,i.Z)(e,1)[0].toLowerCase()===t.toLowerCase()}))}return e?l.Ny+e[1]:l.VD}(),fallbackSrc:l.VD,alt:u(n)?n.name:d(n)?n.human_readable:n},t))}},66156:function(e,n,t){t(27378);var r=t(51471),i=t(24246);n.Z=function(e){var n=e.children;return(0,i.jsx)(r.Z,{title:"Connections",children:n})}},74143:function(e,n,t){var r=t(34896),i=t(24487),o=t(64289),a=t(79894),s=t.n(a),c=t(27378),l=t(6848),u=t(24246);n.Z=function(e){var n=e.steps,t=(0,l.C)(o.ZZ),a=t.connectionOption,d=t.step,f=(0,c.useCallback)((function(e){var n="";switch(e.stepId){case 2:case 3:n=e.label.replace("{identifier}",a.human_readable);break;default:n=e.label}return n}),[a]);return(0,u.jsx)(r.xu,{mb:"32px",children:(0,u.jsx)(i.aG,{fontSize:"sm",fontWeight:"medium",children:n.map((function(e){return(0,u.jsxs)(i.gN,{children:[e!==d&&(0,u.jsx)(i.At,{as:s(),href:e.href,children:f(e)}),e===d&&(0,u.jsx)(i.At,{isCurrentPage:!0,color:"complimentary.500",_hover:{textDecoration:"none"},children:f(e)})]},e.stepId)}))})})}},39100:function(e,n,t){t.d(n,{s:function(){return ee}});var r=t(34896),i=t(83125),o=t(21295),a=t(64289),s=t(86677),c=t(27378),l=t(6848),u=t(60709),d=t(21023),f=t(55732),p=t(97865),h=t(34707),x=t.n(h),m=t(9408),g=t(36653),v=t(57928),j=t(60245),y=t(90849),b=t(14007),O=t(92975),k=t(32751),w=t(16155),C=t(9992),S=t(5008),_=t(89672),P=t(29549),Z=t(34090);function z(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}var D=function(e,n){var t=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?z(Object(t),!0).forEach((function(n){(0,y.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):z(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},e);return Object.entries(n.properties).forEach((function(e){var n,r=(0,p.Z)(e,2),i=r[0],o=r[1];"integer"===o.type?t[i]=o.default?Number(o.default):0:t[i]=null!==(n=o.default)&&void 0!==n?n:""})),t},E=t(24246);function I(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function R(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?I(Object(t),!0).forEach((function(n){(0,y.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):I(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var A="#/definitions/FidesDatasetReference",F=function(e){var n=e.data,t=e.defaultValues,i=e.isSubmitting,o=void 0!==i&&i,s=e.onSaveClick,u=e.onTestConnectionClick,h=e.testButtonLabel,g=void 0===h?"Test connection":h,j=(0,c.useRef)(!1),y=(0,m.HK)().handleError,z=(0,l.C)(a.ZZ),I=z.connection,F=z.connectionOption,L=(0,v.h2)(),V=(0,p.Z)(L,2),q=V[0],T=V[1],W=function(e){var n;return"undefined"!==typeof e&&""!==e||(n="Connection Identifier is required"),e&&(0,b.kE)(e)&&(n="Connection Identifier must be an alphanumeric value"),n},N=function(e,n,t){var r;("undefined"!==typeof n&&""!==n||(r="".concat(e," is required")),t===A)&&(n.includes(".")?n.split(".").length<3&&(r="Dataset reference must include at least three parts"):r="Dataset reference must be dot delimited");return r},M=function(e,n){return(0,E.jsx)(O.lX,{color:"gray.900",fontSize:"14px",fontWeight:"semibold",htmlFor:e,minWidth:"150px",children:n})},U=function(e){var n;if((null===(n=e.allOf)||void 0===n?void 0:n[0].$ref)===A)return"Enter dataset.collection.field"},H=function(){var e=(0,f.Z)(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q(I.key).unwrap();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),y(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){return j.current=!0,T.isSuccess&&u(T),function(){j.current=!1}}),[u,T]),(0,E.jsx)(Z.J9,{enableReinitialize:!0,initialValues:function(){var e,r=R({},t);null!==I&&void 0!==I&&I.key&&(r.name=I.name,r.description=I.description,r.instance_key=I.connection_type===d.Rj.SAAS?null===(e=I.saas_config)||void 0===e?void 0:e.fides_key:I.key);return D(r,n)}(),onSubmit:function(e,t){var r=R({},e);Object.keys(n.properties).forEach((function(t){var i;if((null===(i=n.properties[t].allOf)||void 0===i?void 0:i[0].$ref)===A){var o=e[t].split(".");r[t]={dataset:o.shift(),field:o.join("."),direction:"from"}}})),s(r,t)},validateOnBlur:!1,validateOnChange:!1,children:function(e){return(0,E.jsx)(Z.l0,{noValidate:!0,children:(0,E.jsxs)(r.gC,{align:"stretch",gap:"16px",children:[(0,E.jsx)(Z.gN,{id:"name",name:"name",validate:function(e){return N("Name",e)},children:function(n){var t=n.field;return(0,E.jsxs)(O.NI,{display:"flex",isRequired:!0,isInvalid:e.errors.name&&e.touched.name,children:[M("name","Name"),(0,E.jsxs)(r.gC,{align:"flex-start",w:"inherit",children:[(0,E.jsx)(k.II,R(R({},t),{},{autoComplete:"off",autoFocus:!0,color:"gray.700",placeholder:"Enter a friendly name for your new ".concat(F.human_readable," connection"),size:"sm","data-testid":"input-name"})),(0,E.jsx)(O.J1,{children:e.errors.name})]}),(0,E.jsx)(r.kC,{alignItems:"center",h:"32px",visibility:"hidden",children:(0,E.jsx)(S.IT,{marginLeft:"8px"})})]})}}),(0,E.jsx)(Z.gN,{id:"description",name:"description",children:function(e){var n=e.field;return(0,E.jsxs)(O.NI,{display:"flex",children:[M("description","Description"),(0,E.jsx)(_.g,R(R({},n),{},{color:"gray.700",placeholder:"Enter a description for your new ".concat(F.human_readable," connection"),resize:"none",size:"sm",value:n.value||""})),(0,E.jsx)(r.kC,{alignItems:"center",h:"32px",visibility:"hidden",children:(0,E.jsx)(S.IT,{marginLeft:"8px"})})]})}}),(0,E.jsx)(Z.gN,{id:"instance_key",name:"instance_key",validate:W,children:function(n){var t=n.field;return(0,E.jsxs)(O.NI,{display:"flex",isRequired:!0,isInvalid:e.errors.instance_key&&e.touched.instance_key,children:[M("instance_key","Connection Identifier"),(0,E.jsxs)(r.gC,{align:"flex-start",w:"inherit",children:[(0,E.jsx)(k.II,R(R({},t),{},{autoComplete:"off",color:"gray.700",isDisabled:!(null===I||void 0===I||!I.key),placeholder:"A unique identifier for your new ".concat(F.human_readable," connection"),size:"sm"})),(0,E.jsx)(O.J1,{children:e.errors.instance_key})]}),(0,E.jsx)(C.u,{"aria-label":"The fides_key will allow fidesops to associate dataset field references appropriately. Must be a unique alphanumeric value with no spaces (underscores allowed) to represent this connection.",hasArrow:!0,label:"The fides_key will allow fidesops to associate dataset field references appropriately. Must be a unique alphanumeric value with no spaces (underscores allowed) to represent this connection.",placement:"right-start",openDelay:500,children:(0,E.jsx)(r.kC,{alignItems:"center",h:"32px",children:(0,E.jsx)(S.IT,{marginLeft:"8px",_hover:{cursor:"pointer"}})})})]})}}),Object.entries(n.properties).map((function(e){var t=(0,p.Z)(e,2),i=t[0],o=t[1];return"advanced_settings"===i?null:function(e,t){var i;return(0,E.jsx)(Z.gN,{id:e,name:e,validate:!!(null!==(i=n.required)&&void 0!==i&&i.includes(e)||"integer"===t.type)&&function(e){var n;return N(t.title,e,null===(n=t.allOf)||void 0===n?void 0:n[0].$ref)},children:function(i){var o,a=i.field,s=i.form;return(0,E.jsxs)(O.NI,{display:"flex",isRequired:null===(o=n.required)||void 0===o?void 0:o.includes(e),isInvalid:s.errors[e]&&s.touched[e],children:[M(e,t.title),(0,E.jsxs)(r.gC,{align:"flex-start",w:"inherit",children:["integer"!==t.type&&(0,E.jsx)(k.II,R(R({},a),{},{placeholder:U(t),autoComplete:"off",color:"gray.700",size:"sm"})),"integer"===t.type&&(0,E.jsxs)(w.Y2,{allowMouseWheel:!0,color:"gray.700",defaultValue:0,min:0,size:"sm",children:[(0,E.jsx)(w.zu,R(R({},a),{},{autoComplete:"off"})),(0,E.jsxs)(w.Fi,{children:[(0,E.jsx)(w.WQ,{}),(0,E.jsx)(w.Y_,{})]})]}),(0,E.jsx)(O.J1,{children:s.errors[e]})]}),(0,E.jsx)(C.u,{"aria-label":t.description,hasArrow:!0,label:t.description,placement:"right-start",openDelay:500,children:(0,E.jsx)(r.kC,{alignItems:"center",h:"32px",visibility:t.description?"visible":"hidden",children:(0,E.jsx)(S.IT,{marginLeft:"8px",_hover:{cursor:"pointer"}})})})]})}},e)}(i,o)})),(0,E.jsxs)(P.hE,{size:"sm",spacing:"8px",variant:"outline",children:[(0,E.jsx)(P.zx,{colorScheme:"gray.700",isDisabled:!(null!==I&&void 0!==I&&I.key),isLoading:T.isLoading||T.isFetching,loadingText:"Testing",onClick:H,variant:"outline",children:g}),(0,E.jsx)(P.zx,{bg:"primary.800",color:"white",isDisabled:o,isLoading:o,loadingText:"Submitting",size:"sm",variant:"solid",type:"submit",_active:{bg:"primary.500"},_disabled:{opacity:"inherit"},_hover:{bg:"primary.400"},children:"Save"})]})]})})}})},L=t(60933),V=function(e){var n=e.onConnectionCreated,t=e.data,r=(0,j.I0)(),i=(0,g.V)(),o=i.errorAlert,s=i.successAlert,u=(0,m.HK)().handleError,d=(0,c.useState)(!1),h=d[0],y=d[1],b=(0,l.C)(a.ZZ),O=b.connection,k=b.connectionOption,w=(0,v.pH)(),C=(0,p.Z)(w,1)[0],S=(0,v.Du)(),_=(0,p.Z)(S,1)[0],P=function(){var e=(0,f.Z)(x().mark((function e(i){var c,l,d,f,p;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(!0),l={access:"write",connection_type:null===k||void 0===k?void 0:k.identifier,description:i.description,disabled:!1,key:(0,L.E)(i.instance_key),name:i.name},e.next=5,C(l).unwrap();case 5:if(d=e.sent,!((null===(c=d.failed)||void 0===c?void 0:c.length)>0)){e.next=10;break}o(d.failed[0].message),e.next=16;break;case 10:return f={connection_key:d.succeeded[0].key,secrets:{}},Object.entries(t.properties).forEach((function(e){f.secrets[e[0]]=i[e[0]]})),e.next=14,_(f).unwrap();case 14:"failed"===(p=e.sent).test_status?o((0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("b",{children:"Message:"})," ",p.msg,(0,E.jsx)("br",{}),(0,E.jsx)("b",{children:"Failure Reason:"})," ",p.failure_reason]})):(r((0,a.lm)(d.succeeded[0])),s("Connector successfully ".concat(null!==O&&void 0!==O&&O.key?"updated":"added","!")),null!==O&&void 0!==O&&O.key||!n||n());case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),u(e.t0);case 21:return e.prev=21,y(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[0,18,21,24]])})));return function(n){return e.apply(this,arguments)}}();return{isSubmitting:h,handleSubmit:P,connectionOption:k}},q=function(e){var n=e.data,t=e.onConnectionCreated,i=e.onTestConnectionClick,o=V({onConnectionCreated:t,data:n}),a=o.isSubmitting,s=o.handleSubmit,c=o.connectionOption;return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(r.xu,{color:"gray.700",fontSize:"14px",h:"80px",children:["Connect to your ",c.human_readable," environment by providing credential information below. Once you have saved your connector credentials, you can review what data is included when processing a privacy request in your Dataset configuration."]}),(0,E.jsx)(F,{data:n,defaultValues:{description:"",instance_key:"",name:""},isSubmitting:a,onSaveClick:s,onTestConnectionClick:i})]})};function T(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function W(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?T(Object(t),!0).forEach((function(n){(0,y.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):T(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var N={description:"",instance_key:"",name:""},M={advanced_settings:{identity_types:{email:!1,phone_number:!1,cookie_ids:[]}}},U=function(e){var n=e.data,t=e.onConnectionCreated,i=e.onTestEmail,o=V({onConnectionCreated:t,data:n}),a=o.connectionOption,s=o.isSubmitting,c=o.handleSubmit;return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(r.xu,{color:"gray.700",fontSize:"14px",h:"80px",children:["Configure your ",a.human_readable," connector by providing the connector name, description and a test email address. Once you have saved the details, you can click test email to check the format of the email."]}),(0,E.jsx)(F,{data:n,defaultValues:N,isSubmitting:s,onSaveClick:function(e){c(W(W({},e),M))},onTestConnectionClick:i,testButtonLabel:"Test email"})]})},H=t(68301),X=t(4141),Y=t(81371),B=function(e){var n=e.defaultValues,t=e.isSubmitting,i=void 0!==t&&t,o=e.onSaveClick,c=(0,s.useRouter)(),d=(0,l.C)(a.ZZ),f=d.connection,p=d.connectionOption;return(0,E.jsx)(Z.J9,{initialValues:(null!==f&&void 0!==f&&f.key&&(n.name=f.name,n.description=f.description),n),onSubmit:function(e,n){o(e,n)},validateOnBlur:!1,validateOnChange:!1,validationSchema:H.Ry().shape({name:H.Z_().required("Name is required")}),children:(0,E.jsx)(Z.l0,{noValidate:!0,children:(0,E.jsxs)(r.gC,{align:"stretch",gap:"16px",children:[(0,E.jsx)(X.Z,{autoFocus:!0,disabled:!(null===f||void 0===f||!f.key),isRequired:!0,label:"Name",name:"name",placeholder:"Enter a friendly name for your new ".concat(p.human_readable," connection")}),(0,E.jsx)(X.Z,{label:"Description",name:"description",placeholder:"Enter a description for your new ".concat(p.human_readable," connection"),type:"textarea"}),(0,E.jsx)(Y.h,{isSubmitting:i,onCancelClick:function(){c.push(u.JR)}})]})})})},J=function(e){var n=e.onConnectionCreated,t=(0,j.I0)(),i=(0,g.V)(),o=i.errorAlert,s=i.successAlert,u=(0,m.HK)().handleError,d=(0,c.useState)(!1),h=d[0],y=d[1],b=(0,l.C)(a.ZZ),O=b.connection,k=b.connectionOption,w=(0,v.pH)(),C=(0,p.Z)(w,1)[0],S=function(){var e=(0,f.Z)(x().mark((function e(r,i){var c,l,d;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(!0),l={access:"write",connection_type:null===k||void 0===k?void 0:k.identifier,description:r.description,disabled:!1,name:r.name,key:null===O||void 0===O?void 0:O.key},e.next=5,C(l).unwrap();case 5:d=e.sent,(null===(c=d.failed)||void 0===c?void 0:c.length)>0?o(d.failed[0].message):(t((0,a.lm)(d.succeeded[0])),s("Connector successfully ".concat(null!==O&&void 0!==O&&O.key?"updated":"added","!")),null!==O&&void 0!==O&&O.key||!n||n()),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),u(e.t0);case 12:return e.prev=12,y(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})));return function(n,t){return e.apply(this,arguments)}}();return(0,E.jsxs)(r.gC,{align:"stretch",gap:"16px",children:[(0,E.jsxs)(r.xu,{color:"gray.700",fontSize:"14px",children:["To begin setting up your new ",k.human_readable," ","connector you must first assign a name to the connector and a description.",(0,E.jsx)("br",{}),(0,E.jsx)("br",{}),"Once you have completed this section you can then progress onto"," ",(0,E.jsx)(r.xv,{display:"inline-block",fontWeight:"700",children:"DSR customization"})," ","using the menu on the left hand side."]}),(0,E.jsx)(B,{defaultValues:{description:"",name:""},isSubmitting:h,onSaveClick:S})]})},K=function(e){var n=e.data,t=e.onConnectionCreated,i=e.onTestConnectionClick,o=(0,j.I0)(),s=(0,g.V)(),u=s.errorAlert,d=s.successAlert,h=(0,m.HK)().handleError,y=(0,c.useState)(!1),b=y[0],O=y[1],k=(0,l.C)(a.ZZ),w=k.connection,C=k.connectionOption,S=(0,v.NG)(),_=(0,p.Z)(S,1)[0],P=(0,v.pH)(),Z=(0,p.Z)(P,1)[0],z=(0,v.Du)(),D=(0,p.Z)(z,1)[0],I=function(){var e=(0,f.Z)(x().mark((function e(r,i){var s,c,l,f,p,m,g;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,O(!0),!w){e.next=20;break}return c={access:"write",connection_type:w.connection_type,description:r.description,disabled:!1,key:w.key,name:r.name},e.next=6,Z(c).unwrap();case 6:if(l=e.sent,!((null===(s=l.failed)||void 0===s?void 0:s.length)>0)){e.next=11;break}u(l.failed[0].message),e.next=18;break;case 11:return o((0,a.lm)(l.succeeded[0])),f={connection_key:w.key,secrets:{}},Object.entries(n.properties).forEach((function(e){f.secrets[e[0]]=r[e[0]]})),e.next=16,D(f).unwrap();case 16:"failed"===(p=e.sent).test_status?u((0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("b",{children:"Message:"})," ",p.msg,(0,E.jsx)("br",{}),(0,E.jsx)("b",{children:"Failure Reason:"})," ",p.failure_reason]})):d("Connector successfully updated!");case 18:e.next=28;break;case 20:return m={description:r.description,name:r.name,instance_key:(0,L.E)(r.instance_key),saas_connector_type:C.identifier,secrets:{}},Object.entries(n.properties).forEach((function(e){m.secrets[e[0]]=r[e[0]]})),e.next=24,_(m).unwrap();case 24:g=e.sent,o((0,a.lm)(g.connection)),d("Connector successfully added!"),null===t||void 0===t||t();case 28:e.next=33;break;case 30:e.prev=30,e.t0=e.catch(0),h(e.t0);case 33:return e.prev=33,O(!1),e.finish(33);case 36:case"end":return e.stop()}}),e,null,[[0,30,33,36]])})));return function(n,t){return e.apply(this,arguments)}}();return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(r.xu,{color:"gray.700",fontSize:"14px",h:"80px",children:["Connect to your ",C.human_readable," environment by providing credential information below. Once you have saved your connector credentials, you can review what data is included when processing a privacy request in your Dataset configuration."]}),(0,E.jsx)(F,{data:n,defaultValues:{description:"",instance_key:"",name:""},isSubmitting:b,onSaveClick:I,onTestConnectionClick:i})]})},$=t(30794),G=t(1326),Q=function(e){var n,t,i=e.response,o=(0,l.C)(a.ZZ).connectionOption;return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(r.iz,{color:"gray.100"}),(0,E.jsxs)(r.gC,{align:"flex-start",mt:"16px",children:["succeeded"===(null===(n=i.data)||void 0===n?void 0:n.test_status)&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(r.Ug,{children:[(0,E.jsxs)(r.X6,{as:"h5",color:"gray.700",size:"xs",children:["Successfully connected to ",o.human_readable]}),(0,E.jsx)($.Vp,{colorScheme:"green",size:"sm",variant:"solid",children:"Success"})]}),(0,E.jsx)(r.xv,{color:"gray.500",fontSize:"sm",mt:"12px !important",children:(0,G.p6)(i.fulfilledTimeStamp)}),(0,E.jsx)(r.xu,{bg:"green.100",border:"1px solid",borderColor:"green.300",color:"green.700",mt:"16px",borderRadius:"6px",children:(0,E.jsxs)(r.Ug,{alignItems:"flex-start",margin:["14px","17px","14px","17px"],children:[(0,E.jsx)(S.St,{}),(0,E.jsxs)(r.xu,{children:[(0,E.jsx)(r.X6,{as:"h5",color:"green.500",fontWeight:"semibold",size:"xs",children:"Success message:"}),(0,E.jsx)(r.xv,{color:"gray.700",fontSize:"sm",fontWeight:"400",children:i.data.msg})]})]})})]}),"failed"===(null===(t=i.data)||void 0===t?void 0:t.test_status)&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(r.Ug,{children:[(0,E.jsxs)(r.X6,{as:"h5",color:"gray.700",size:"xs",children:["Output error to ",o.human_readable]}),(0,E.jsx)($.Vp,{colorScheme:"red",size:"sm",variant:"solid",children:"Error"})]}),(0,E.jsx)(r.xv,{color:"gray.500",fontSize:"sm",mt:"12px !important",children:(0,G.p6)(i.fulfilledTimeStamp)}),(0,E.jsx)(r.xu,{bg:"red.50",border:"1px solid",borderColor:"red.300",color:"red.300",mt:"16px",borderRadius:"6px",children:(0,E.jsxs)(r.Ug,{alignItems:"flex-start",margin:["14px","17px","14px","17px"],children:[(0,E.jsx)(S.f9,{}),(0,E.jsxs)(r.xu,{children:[(0,E.jsx)(r.X6,{as:"h5",color:"red.500",fontWeight:"semibold",size:"xs",children:"Error message:"}),(0,E.jsx)(r.xv,{color:"gray.700",fontSize:"sm",fontWeight:"400",children:i.data.failure_reason}),(0,E.jsx)(r.xv,{color:"gray.700",fontSize:"sm",fontWeight:"400",children:i.data.msg})]})]})})]})]})]})},ee=function(e){var n=e.onConnectionCreated,t=(0,s.useRouter)(),f=(0,l.C)(a.ZZ).connectionOption,p=f&&f.type===d.Zi.MANUAL,h=(0,a.n3)(f.identifier,{skip:p}),x=h.data,m=h.isFetching,g=h.isLoading,v=h.isSuccess,j=(0,c.useState)(),y=j[0],b=j[1],O=function(e){b(e)},k=(0,c.useCallback)((function(){t.push(u.JR)}),[t]),w=(0,c.useCallback)((function(){switch(null===f||void 0===f?void 0:f.type){case d.Zi.DATABASE:if(v&&x)return(0,E.jsx)(q,{data:x,onConnectionCreated:n,onTestConnectionClick:O});break;case d.Zi.MANUAL:return(0,E.jsx)(J,{onConnectionCreated:n});case d.Zi.SAAS:if(v&&x)return(0,E.jsx)(K,{data:x,onConnectionCreated:n,onTestConnectionClick:O});break;case d.Zi.EMAIL:if(v&&x)return(0,E.jsx)(U,{data:x,onConnectionCreated:k,onTestEmail:O})}}),[null===f||void 0===f?void 0:f.type,x,v,n,k]);return(0,E.jsxs)(r.kC,{gap:"97px",children:[(0,E.jsxs)(r.gC,{w:"579px",gap:"16px",align:"stretch",children:[(m||g)&&(0,E.jsx)(r.M5,{children:(0,E.jsx)(i.$,{})}),w()]}),y&&(0,E.jsxs)(o.Rg,{in:!0,children:[" ",(0,E.jsx)(r.xu,{mt:"16px",maxW:"528px",w:"fit-content",children:(0,E.jsx)(Q,{response:y})})]})]})}},53771:function(e,n,t){t.d(n,{Z:function(){return R}});var r=t(55732),i=t(97865),o=t(90849),a=t(90089),s=t(34707),c=t.n(s),l=t(34896),u=t(83125),d=t(66816),f=t(29549),p=t(9408),h=t(64289),x=t(57928),m=t(86677),g=t(27378),v=t(6848),j=t(78624),y=t(60709),b=t(45128),O=t(9198),k=t(21084),w=t(36653),C=t(66527),S=t(16473),_=t(40695),P=t(24246),Z=function(e){var n=e.data,t=void 0===n?[]:n,r=e.isSubmitting,i=void 0!==r&&r,o=e.onSubmit,a=e.onCancel,s=e.disabled,c=(0,g.useRef)(null),u=(0,w.V)().errorAlert,d=t.length>0?C.ZP.dump(t):void 0,p=(0,g.useState)(void 0),h=p[0],x=p[1],m=(0,g.useState)(!1),v=m[0],j=m[1],y=(0,g.useState)(!d),Z=y[0],z=y[1],D=(0,k.qY)(),E=(0,b.NR)().data,I=(0,g.useState)([]),R=I[0],A=I[1],F=function(){var e=c.current.getValue(),n=C.ZP.load(e,{json:!0});o(n),A([])};return(0,P.jsxs)(l.kC,{gap:"97px",children:[(0,P.jsxs)(l.gC,{align:"stretch",w:"800px",children:[(0,P.jsx)(S.M,{defaultLanguage:"yaml",defaultValue:d,height:"calc(100vh - 526px)",onChange:function(e){try{j(!0),function(e){C.ZP.load(e,{json:!0}),x(void 0)}(e),z(!(e&&""!==e.trim()))}catch(n){(0,S.F)(n)?x(n):u("Could not parse the supplied YAML")}},onMount:function(e,n){c.current=e,c.current.focus()},options:{fontFamily:"Menlo",fontSize:13,minimap:{enabled:!0},readOnly:s},theme:"light"}),(0,P.jsxs)(f.hE,{size:"sm",children:[a?(0,P.jsx)(f.zx,{onClick:a,children:"Cancel"}):null,(0,P.jsx)(f.zx,{colorScheme:"primary",isDisabled:s||Z||!!h||i,isLoading:i,loadingText:"Saving",onClick:function(){if(E&&E.length){var e=c.current.getValue(),n=E.filter((function(n){return e.includes("fides_key: ".concat(n.fides_key,"\n"))})).map((function(e){return e.fides_key}));if(A(n),n.length)return void D.onOpen()}F()},type:"submit","data-testid":"save-yaml-btn",width:"fit-content",children:"Save"})]})]}),v&&(Z||h)&&(0,P.jsx)(_.Z,{isEmptyState:Z,yamlError:h}),(0,P.jsx)(O.cV,{isOpen:D.isOpen,onClose:D.onClose,onConfirm:function(){F(),D.onClose()},title:"Overwrite dataset",message:(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(l.xv,{children:["You are about to overwrite the dataset",R.length>1?"s":""," ",R.map((function(e,n){var t=n===R.length-1;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(l.xv,{color:"complimentary.500",as:"span",fontWeight:"bold",children:e}),t?".":", "]})}))]}),(0,P.jsx)(l.xv,{children:"Are you sure you would like to continue?"})]})})]})},z=["children"];function D(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function E(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?D(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):D(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var I=function(e){var n=e.children,t=(0,a.Z)(e,z);return(0,P.jsx)(l.xv,E(E({color:"gray.700",fontSize:"14px"},t),{},{children:n}))},R=function(){var e=(0,m.useRouter)(),n=(0,p.VY)(),t=n.errorAlert,o=n.successAlert,a=(0,p.HK)().handleError,s=(0,g.useState)(!1),O=s[0],k=s[1],w=(0,v.C)(h.ZZ).connection,C=(0,x.Ci)(w.key),S=C.data,_=C.isFetching,z=C.isLoading,D=C.isSuccess,E=(0,x.Lz)(),R=(0,i.Z)(E,1)[0],A=(0,b.EG)(),F=(0,i.Z)(A,1)[0],L=(0,b.NR)(),V=L.data,q=L.isLoading,T=L.error,W=(0,g.useState)(void 0),N=W[0],M=W[1];(0,g.useEffect)((function(){S&&S.items.length&&M(S.items[0].ctl_dataset.fides_key)}),[S]);var U=function(){e.push(y.JR)},H=function(){var n=(0,r.Z)(c().mark((function n(r){var i,a,s;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a={connection_key:null===w||void 0===w?void 0:w.key,dataset_pairs:r},n.next=3,R(a).unwrap();case 3:s=n.sent,(null===(i=s.failed)||void 0===i?void 0:i.length)>0?t(s.failed[0].message):o("Dataset successfully updated!"),e.push(y.JR);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),X=function(){var e=(0,r.Z)(c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N)try{n=N,S&&S.items.length&&(n=S.items[0].fides_key),H([{fides_key:n,ctl_dataset_fides_key:N}])}catch(t){a(t)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=(0,r.Z)(c().mark((function e(n){var r,i,o,s,l,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k(!0),r=Array.isArray(n)?n:[n],e.next=5,F(r);case 5:if(!("error"in(i=e.sent))){e.next=10;break}return o=(0,j.e$)(i.error),t(o),e.abrupt("return");case 10:l=(s=r).map((function(e){return{fides_key:e.fides_key,ctl_dataset_fides_key:e.fides_key}})),S&&S.items.length&&(u=S.items,l=u.map((function(e,n){return{fides_key:e.fides_key,ctl_dataset_fides_key:s[n].fides_key}}))),H(l),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),a(e.t0);case 19:return e.prev=19,k(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[0,16,19,22]])})));return function(n){return e.apply(this,arguments)}}(),B=""!==N&&void 0!==N;if(_||z||q&&!T)return(0,P.jsx)(l.M5,{children:(0,P.jsx)(u.$,{})});var J=V&&V.length;return(0,P.jsxs)(l.gC,{alignItems:"left",children:[T?(0,P.jsx)(I,{mb:4,color:"red",children:"There was a problem loading existing datasets, please try again."}):null,(0,P.jsxs)(l.Ug,{spacing:8,mb:4,children:[J?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(l.gC,{alignSelf:"start",mr:4,children:[(0,P.jsxs)(l.xu,{"data-testid":"dataset-selector-section",mb:4,children:[(0,P.jsx)(I,{mb:4,children:"Choose a dataset to associate with this connector."}),(0,P.jsx)(d.Ph,{size:"sm",width:"fit-content",placeholder:"Select",onChange:function(e){M(e.target.value)},value:N,"data-testid":"dataset-selector",children:V.map((function(e){return(0,P.jsx)("option",{value:e.fides_key,children:e.fides_key},e.fides_key)}))})]}),(0,P.jsx)(f.zx,{size:"sm",colorScheme:"primary",alignSelf:"start",disabled:!B,onClick:X,"data-testid":"save-dataset-link-btn",children:"Save"})]}),(0,P.jsx)(I,{children:"or"})]}):null,(0,P.jsxs)(l.xu,{"data-testid":"yaml-editor-section",children:[(0,P.jsx)(I,{mb:4,children:"View your dataset YAML below!"}),D&&null!==S&&void 0!==S&&S.items?(0,P.jsx)(Z,{data:S.items.map((function(e){return e.ctl_dataset})),isSubmitting:O,onSubmit:Y,disabled:B,onCancel:J?void 0:U}):null]})]}),J?(0,P.jsx)(f.zx,{width:"fit-content",size:"sm",variant:"outline",onClick:U,children:"Cancel"}):null]})}},4141:function(e,n,t){var r=t(90849),i=t(97865),o=t(90089),a=t(92975),s=t(34896),c=t(16155),l=t(32751),u=t(89672),d=t(5008),f=t(34090),p=t(24246),h=["disabled","displayHelpIcon","helpIconVisibility","isRequired","label","type"];function x(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function m(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?x(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):x(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){var n=e.disabled,t=void 0!==n&&n,r=e.displayHelpIcon,x=void 0===r||r,g=e.helpIconVisibility,v=void 0!==g&&g,j=e.isRequired,y=void 0!==j&&j,b=e.label,O=e.type,k=void 0===O?"text":O,w=(0,o.Z)(e,h),C=(0,f.U$)(w),S=(0,i.Z)(C,2),_=S[0],P=S[1];return(0,p.jsxs)(a.NI,{display:"flex",isRequired:y,isInvalid:!(!P.error||!P.touched),children:[b&&(0,p.jsx)(a.lX,{color:"gray.900",fontSize:"14px",fontWeight:"semibold",htmlFor:w.id||w.name,minWidth:"150px",children:b}),(0,p.jsxs)(s.gC,{align:"flex-start",w:"inherit",children:["number"===k&&(0,p.jsxs)(c.Y2,{allowMouseWheel:!0,color:"gray.700",defaultValue:0,min:0,size:"sm",children:[(0,p.jsx)(c.zu,m(m({},_),{},{autoComplete:"off",autoFocus:w.autoFocus})),(0,p.jsxs)(c.Fi,{children:[(0,p.jsx)(c.WQ,{}),(0,p.jsx)(c.Y_,{})]})]}),"text"===k&&(0,p.jsx)(l.II,m(m({},_),{},{autoComplete:"off",autoFocus:w.autoFocus,color:"gray.700",isDisabled:t,placeholder:w.placeholder,size:"sm"})),"textarea"===k&&(0,p.jsx)(u.g,m(m({},_),{},{autoComplete:"off",autoFocus:w.autoFocus,color:"gray.700",placeholder:w.placeholder,resize:"none",size:"sm",value:_.value||""})),(0,p.jsx)(a.J1,{children:P.error})]}),x&&(0,p.jsx)(s.kC,{alignContent:"center",h:"32px",visibility:v?"visible":"hidden",children:(0,p.jsx)(d.IT,{marginLeft:"8px",_hover:{cursor:"pointer"}})})]})}},60933:function(e,n,t){t.d(n,{E:function(){return r},S:function(){return i}});var r=function(e){return e.toLowerCase().replace(/ /g,"_")},i=function(e,n){var t="".concat(window.location.origin+n,"&key=").concat(e);window.location.href.toLowerCase()!==t.toLowerCase()&&window.history.replaceState(null,"",t)}},81371:function(e,n,t){t.d(n,{h:function(){return o}});var r=t(29549),i=(t(27378),t(24246)),o=function(e){var n=e.isSubmitting,t=void 0!==n&&n,o=e.onCancelClick;return(0,i.jsxs)(r.hE,{size:"sm",spacing:"8px",variant:"outline",children:[(0,i.jsx)(r.zx,{onClick:o,variant:"outline",children:"Cancel"}),(0,i.jsx)(r.zx,{bg:"primary.800",color:"white",isDisabled:t,isLoading:t,loadingText:"Submitting",size:"sm",variant:"solid",type:"submit",_active:{bg:"primary.500"},_disabled:{opacity:"inherit"},_hover:{bg:"primary.400"},children:"Save"})]})}},53552:function(e,n,t){t.d(n,{Z:function(){return S}});var r=t(90849),i=t(55732),o=t(97865),a=t(34707),s=t.n(a),c=t(34896),l=t(83125),u=t(9408),d=t(64289),f=t(57928),p=t(86677),h=t(27378),x=t(6848),m=t(60709),g=t(5008),v=t(34090),j=t(68301),y=t(4141),b=t(81371),O=t(24246),k=function(e){var n=e.data,t=void 0===n?[]:n,r=e.isSubmitting,i=void 0!==r&&r,o=e.onSaveClick,a=(0,p.useRouter)(),s=(0,u.VY)().errorAlert,l=function(){a.push(m.JR)};return(0,O.jsx)(v.J9,{enableReinitialize:!0,initialValues:{fields:t.length>0?t:[{pii_field:"",dsr_package_label:""}]},onSubmit:function(e,n){new Set(e.fields.map((function(e){return e.pii_field}))).size<e.fields.length?s("PII Field must be unique"):o(e,n)},validateOnBlur:!1,validateOnChange:!1,validationSchema:j.Ry({fields:j.IX().of(j.Ry().shape({pii_field:j.Z_().required("PII Field is required").min(1,"PII Field must have at least one character").max(200,"PII Field has a maximum of 200 characters").label("PII Field"),dsr_package_label:j.Z_().required("DSR Package Label is required").min(1,"DSR Package Label must have at least one character").max(200,"DSR Package Label has a maximum of 200 characters").label("DSR Package Label")}))}),children:function(e){return(0,O.jsx)(v.l0,{style:{marginTop:0},noValidate:!0,children:(0,O.jsx)(c.gC,{align:"stretch",children:(0,O.jsx)(v.F2,{name:"fields",render:function(n){var t=e.values.fields;return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(c.Ug,{color:"gray.900",flex:"1",fontSize:"14px",fontWeight:"semibold",lineHeight:"20px",mb:"6px",spacing:"24px",children:[(0,O.jsx)(c.xu,{w:"416px",children:"PII Field"}),(0,O.jsx)(c.xu,{w:"416px",children:"DSR Package Label"}),(0,O.jsx)(c.xu,{})]}),(0,O.jsx)(c.xu,{maxH:"calc(100vh - 484px)",paddingRight:"13px",overflow:"auto",children:t&&t.length>0?t.map((function(e,t){return(0,O.jsxs)(c.Ug,{mt:t>0?"12px":void 0,spacing:"24px",children:[(0,O.jsx)(c.xu,{h:"57px",w:"416px",children:(0,O.jsx)(y.Z,{autoFocus:0===t,displayHelpIcon:!1,isRequired:!0,name:"fields.".concat(t,".pii_field")})}),(0,O.jsx)(c.xu,{h:"57px",w:"416px",children:(0,O.jsx)(y.Z,{displayHelpIcon:!1,isRequired:!0,name:"fields.".concat(t,".dsr_package_label")})}),(0,O.jsx)(c.xu,{h:"57px",visibility:t>0?"visible":"hidden",children:(0,O.jsx)(g.lr,{onClick:function(){return n.remove(t)},_hover:{cursor:"pointer"}})})]},t)})):null}),(0,O.jsx)(c.xv,{color:"complimentary.500",fontWeight:"medium",fontSize:"sm",mb:"24px !important",mt:"24px !important",onClick:function(){n.push({pii_field:"",dsr_package_label:""})},_hover:{cursor:"pointer"},children:"Add new PII field"}),(0,O.jsx)(b.h,{isSubmitting:i,onCancelClick:l})]})}})})})}})};function w(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function C(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?w(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var S=function(){var e=(0,h.useRef)(!1),n=(0,p.useRouter)(),t=(0,u.VY)().successAlert,r=(0,u.HK)().handleError,a=(0,h.useState)(!1),g=a[0],v=a[1],j=(0,h.useState)([]),y=j[0],b=j[1],w=(0,x.C)(d.ZZ).connection,S=(0,f.QV)(w.key),_=S.data,P=S.isFetching,Z=S.isLoading,z=S.isSuccess,D=(0,f.jF)(),E=(0,o.Z)(D,1)[0],I=(0,f._d)(),R=(0,o.Z)(I,1)[0],A=function(){var e=(0,i.Z)(s().mark((function e(i,o){var a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,v(!0),a={connection_key:null===w||void 0===w?void 0:w.key,body:C({},i)},!(y.length>0)){e.next=8;break}return e.next=6,R(a).unwrap();case 6:e.next=10;break;case 8:return e.next=10,E(a).unwrap();case 10:t("DSR customization ".concat(y.length>0?"updated":"added","!")),n.push(m.JR),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),r(e.t0);case 17:return e.prev=17,v(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[0,14,17,20]])})));return function(n,t){return e.apply(this,arguments)}}();return(0,h.useEffect)((function(){return e.current=!0,z&&_&&b(_.fields),function(){e.current=!1}}),[_,z]),(0,O.jsxs)(c.gC,{align:"stretch",gap:"16px",children:[(0,O.jsx)(c.xu,{color:"gray.700",fontSize:"14px",w:"572px",children:"Customize your PII fields to create a friendly label name for your privacy request packages. This \u201cPackage Label\u201d is the label your user will see in their downloaded package."}),(P||Z)&&(0,O.jsx)(c.M5,{children:(0,O.jsx)(l.$,{})}),e.current&&!Z?(0,O.jsx)(k,{data:y,isSubmitting:g,onSaveClick:A}):null]})}},60041:function(e,n,t){t.d(n,{Bw:function(){return a},D4:function(){return i},Dy:function(){return c},XD:function(){return l},cz:function(){return u},hE:function(){return s},oK:function(){return o}});var r=t(76649),i=function(e){return"error"in e},o=function(e){return(0,r.Ln)({status:"string"},e)&&"PARSING_ERROR"===e.status},a=function(e){return(0,r.Ln)({status:"number",data:{}},e)},s=function(e){return(0,r.Ln)({detail:"string"},e)},c=function(e){return(0,r.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e)},l=function(e){return(0,r.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e)},u=function(e){return(0,r.Ln)({detail:[{loc:["string","number"],msg:"string",type:"string"}]},e)}}}]);