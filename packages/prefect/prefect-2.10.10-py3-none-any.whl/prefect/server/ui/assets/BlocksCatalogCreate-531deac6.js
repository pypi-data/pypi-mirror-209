import{d as T,g as P,aG as x,O as D,c as t,ae as m,i as e,a as n,w as u,k as p,h as w,E as A,o as k,n as F,b5 as H,b6 as N,b7 as O,b8 as V,b9 as E,aD as d,ba as G,Y as M}from"./index-b49daa9a.js";import{u as Q}from"./usePageTitle-bc6dd77f.js";const $=T({__name:"BlocksCatalogCreate",setup(R){const l=P(),a=A(),b=x("redirect"),i=D("blockTypeSlug"),y=t(()=>i.value?[i.value]:null),f=m(l.blockTypes.getBlockTypeBySlug,y),o=t(()=>f.response),h=t(()=>o.value?[o.value.id]:null),_=m(l.blockSchemas.getBlockSchemaForBlockType,h),r=t(()=>_.response);function g(s){l.blockDocuments.createBlockDocument(s).then(({id:c})=>B(c)).catch(c=>{d("Failed to create block","error"),console.error(c)})}function S(){a.back()}function B(s){if(d("Block created successfully","success"),b.value){const c=a.resolve(G(b.value));a.push(c);return}a.push(M.block(s))}const v=t(()=>o.value?`Create ${o.value.name} Block`:"Create Block");return Q(v),(s,c)=>{const C=w("p-layout-default");return e(o)?(k(),n(C,{key:0,class:"blocks-catalog-create"},{header:u(()=>[F(e(H),{"block-type":e(o)},null,8,["block-type"])]),default:u(()=>[e(o)?(k(),n(e(N),{key:0,"block-type":e(o)},{default:u(()=>[e(r)?(k(),n(e(O),V({key:e(r).id,"block-schema":e(r)},E({submit:g,cancel:S})),null,16,["block-schema"])):p("",!0)]),_:1},8,["block-type"])):p("",!0)]),_:1})):p("",!0)}}});export{$ as default};
