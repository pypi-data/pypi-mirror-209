import{d as L,g as P,R as d,c as r,r as v,C as z,D as A,a as o,w as i,h,E as M,o as s,n as a,i as e,X,m as b,G as j,y as g,H as q,B as C,P as G,k as f,J as m,K as I,U as K,M as O,N as Q,Q as W,S as Y,V as Z,W as $,q as ee,Y as se}from"./index-b49daa9a.js";import{u as te}from"./usePageTitle-bc6dd77f.js";const oe={class:"flow-runs__list"},ne={class:"flow-runs__list-controls"},le={class:"flow-runs__list-controls--right"},de=L({__name:"FlowRuns",setup(ae){const F=M(),c=P(),_=d(c.flowRuns.getFlowRunsCount,[{}]),V=r(()=>_.executed),S=r(()=>_.response===0),p=v(),x=z(p,1200),{filter:t,isCustomFilter:B}=A({flowRuns:{nameLike:x}}),w={interval:3e4},R=d(c.flowRuns.getFlowRunsCount,[t],w),N=r(()=>R.response),H=d(c.ui.getFlowRunHistory,[t],w),U=r(()=>H.response??[]),y=d(c.flowRuns.getFlowRuns,[t],w),k=r(()=>y.response??[]),n=v([]);function D(){F.push(se.flowRuns())}const J=()=>{n.value=[],y.refresh(),R.refresh()};return te("Flow Runs"),(ue,l)=>{const T=h("p-button"),E=h("p-layout-default");return s(),o(E,{class:"flow-runs"},{header:i(()=>[a(e(X))]),default:i(()=>[e(V)?(s(),b(g,{key:0},[e(S)?(s(),o(e(j),{key:0})):(s(),b(g,{key:1},[a(e(q)),e(C).md?(s(),o(e(G),{key:0,history:e(U),"start-date":e(t).flowRuns.expectedStartTimeAfter,"end-date":e(t).flowRuns.expectedStartTimeBefore,class:"flow-runs__chart"},null,8,["history","start-date","end-date"])):f("",!0),m("div",oe,[m("div",ne,[m("div",le,[n.value.length==0?(s(),o(e(I),{key:0,count:e(N),label:"Flow run"},null,8,["count"])):(s(),o(e(K),{key:1,count:n.value.length},null,8,["count"])),a(e(O),{selected:n.value,onDelete:J},null,8,["selected"])]),e(C).md?(s(),o(e(Q),{key:0,modelValue:p.value,"onUpdate:modelValue":l[0]||(l[0]=u=>p.value=u),placeholder:"Search by run name",label:"Search by run name"},null,8,["modelValue"])):f("",!0),a(e(W),{modelValue:e(t).sort,"onUpdate:modelValue":l[1]||(l[1]=u=>e(t).sort=u)},null,8,["modelValue"])]),a(e(Y),{selected:n.value,"onUpdate:selected":l[2]||(l[2]=u=>n.value=u),"flow-runs":e(k)},null,8,["selected","flow-runs"]),e(k).length?f("",!0):(s(),o(e(Z),{key:0},$({_:2},[e(B)?{name:"actions",fn:i(()=>[a(T,{size:"sm",secondary:"",onClick:D},{default:i(()=>[ee(" Clear Filters ")]),_:1})]),key:"0"}:void 0]),1024))])],64))],64)):f("",!0)]),_:1})}}});export{de as default};
