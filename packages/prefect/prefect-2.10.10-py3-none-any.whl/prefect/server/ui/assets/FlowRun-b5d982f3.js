import{d as T,r as g,c as o,o as n,m as E,J as y,n as m,i as e,_ as O,$ as R,a0 as A,O as K,g as V,R as Y,a1 as $,a2 as G,T as U,a3 as j,a4 as z,a5 as M,a as s,w as t,h as b,E as q,a6 as H,k as u,a7 as Q,a8 as W,a9 as X,aa as Z,ab as ee,ac as le,ad as ae,v as ne,Y as se}from"./index-b49daa9a.js";import{u as te}from"./usePageTitle-bc6dd77f.js";const oe={class:"flow-run-graphs__panel-content"},ue=T({__name:"FlowRunGraphs",props:{flowRun:null},setup(k){const d=g(!1),c=g(null),p=g(!1),f=o(()=>({root:{"flow-run-graphs--fullscreen":d.value},graph:{"flow-run-graphs__graphs--panel-open":p.value},panel:{"flow-run-graphs__panel-container--panel-open":p.value}}));function l(i){c.value=i,p.value=!!i}function v(){p.value=!1}return(i,r)=>(n(),E("div",{class:R(["flow-run-graphs",e(f).root])},[y("div",{class:R(["flow-run-graphs__graphs",e(f).graph])},[m(e(O),{class:"flow-run-graphs__timeline","flow-run":k.flowRun,height:"340px","selected-node":c.value,onSelection:l,"onUpdate:fullscreen":r[0]||(r[0]=h=>d.value=h)},null,8,["flow-run","selected-node"])],2),y("div",{class:R(["flow-run-graphs__panel-container",e(f).panel])},[y("div",oe,[m(e(A),{"selected-node":c.value,floating:d.value,onDismiss:v},null,8,["selected-node","floating"])])],2)],2))}});const pe=T({__name:"FlowRun",setup(k){const d=q(),c=K("flowRunId"),p=V(),f=Y(p.flowRuns.getFlowRun,[c],{interval:5e3}),l=o(()=>f.response),v=o(()=>{var a;return(a=l.value)==null?void 0:a.deploymentId}),{deployment:i}=$(v),r=o(()=>{var a;return(a=l.value)!=null&&a.stateType?G(l.value.stateType):!0}),h=o(()=>[{label:"Logs"},{label:"Task Runs",hidden:r.value},{label:"Subflow Runs",hidden:r.value},{label:"Results",hidden:r.value},{label:"Artifacts",hidden:r.value},{label:"Details"},{label:"Parameters"}]),{tab:_,tabs:F}=U(h,"Logs");j(c,(a,w)=>{a!==w&&(_.value="Logs")});const B=o(()=>{var a;return((a=l.value)==null?void 0:a.parameters)??{}}),C=o(()=>{var a;return((a=i.value)==null?void 0:a.parameterOpenApiSchema)??{}}),x=o(()=>z(B.value,C.value));function I(){d.push(se.flowRuns())}const J=o(()=>{var a;return(a=l.value)==null?void 0:a.stateType});M(J);const L=o(()=>l.value?`Flow Run: ${l.value.name}`:"Flow Run");return te(L),(a,w)=>{const N=b("p-code-highlight"),P=b("p-tabs"),S=b("p-layout-default");return n(),s(S,{class:"flow-run"},{header:t(()=>[e(l)?(n(),s(e(H),{key:0,"flow-run-id":e(l).id,onDelete:I},null,8,["flow-run-id"])):u("",!0)]),default:t(()=>[e(l)&&!e(r)?(n(),s(ue,{key:0,"flow-run":e(l)},null,8,["flow-run"])):u("",!0),m(P,{selected:e(_),"onUpdate:selected":w[0]||(w[0]=D=>ne(_)?_.value=D:null),tabs:e(F)},{details:t(()=>[e(l)?(n(),s(e(Q),{key:0,"flow-run":e(l)},null,8,["flow-run"])):u("",!0)]),logs:t(()=>[e(l)?(n(),s(e(W),{key:0,"flow-run":e(l)},null,8,["flow-run"])):u("",!0)]),results:t(()=>[e(l)?(n(),s(e(X),{key:0,"flow-run":e(l)},null,8,["flow-run"])):u("",!0)]),artifacts:t(()=>[e(l)?(n(),s(e(Z),{key:0,"flow-run":e(l)},null,8,["flow-run"])):u("",!0)]),"task-runs":t(()=>[e(l)?(n(),s(e(ee),{key:0,"flow-run-id":e(l).id},null,8,["flow-run-id"])):u("",!0)]),"subflow-runs":t(()=>[e(l)?(n(),s(e(le),{key:0,"flow-run-id":e(l).id},null,8,["flow-run-id"])):u("",!0)]),parameters:t(()=>[e(l)?(n(),s(e(ae),{key:0,"text-to-copy":e(x)},{default:t(()=>[m(N,{lang:"json",text:e(x),class:"flow-run__parameters"},null,8,["text"])]),_:1},8,["text-to-copy"])):u("",!0)]),_:1},8,["selected","tabs"])]),_:1})}}});export{pe as default};
