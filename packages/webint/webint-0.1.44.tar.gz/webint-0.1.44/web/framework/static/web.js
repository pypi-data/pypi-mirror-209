var __webpack_modules__={646:function(e){e.exports=function(){function e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)e[o]=r[o]}return e}return function t(r,o){function n(t,n,s){if("undefined"!=typeof document){"number"==typeof(s=e({},o,s)).expires&&(s.expires=new Date(Date.now()+864e5*s.expires)),s.expires&&(s.expires=s.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var a in s)s[a]&&(i+="; "+a,!0!==s[a]&&(i+="="+s[a].split(";")[0]));return document.cookie=t+"="+r.write(n,t)+i}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],o={},n=0;n<t.length;n++){var s=t[n].split("="),i=s.slice(1).join("=");try{var a=decodeURIComponent(s[0]);if(o[a]=r.read(i,a),e===a)break}catch(e){}}return e?o[e]:o}},remove:function(t,r){n(t,"",e({},r,{expires:-1}))},withAttributes:function(r){return t(this.converter,e({},this.attributes,r))},withConverter:function(r){return t(e({},this.converter,r),this.attributes)}},{attributes:{value:Object.freeze(o)},converter:{value:Object.freeze(r)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}()}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.exports}__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var __webpack_exports__={};(()=>{__webpack_require__.d(__webpack_exports__,{PY:()=>upgradeTimestamps,Q3:()=>MicropubClient,Qk:()=>cookies,Rz:()=>unload,Wl:()=>upgradeLink,Yv:()=>createEls,_:()=>_,iZ:()=>popstate,n4:()=>offline,ps:()=>online,qs:()=>getBrowser,ut:()=>createEl,vU:()=>error,wS:()=>mouseup,zD:()=>load});const getBrowser=()=>{let e="";screen.width&&(e+=(screen.width?screen.width:"")+" x "+(screen.height?screen.height:""));const t=navigator.appVersion,r=navigator.userAgent;let o,n,s,i=navigator.appName,a=""+parseFloat(navigator.appVersion),_=parseInt(navigator.appVersion,10);-1!==(n=r.indexOf("Opera"))&&(i="Opera",a=r.substring(n+6),-1!==(n=r.indexOf("Version"))&&(a=r.substring(n+8))),-1!==(n=r.indexOf("OPR"))?(i="Opera",a=r.substring(n+4)):-1!==(n=r.indexOf("Edge"))?(i="Microsoft Legacy Edge",a=r.substring(n+5)):-1!==(n=r.indexOf("Edg"))?(i="Microsoft Edge",a=r.substring(n+4)):-1!==(n=r.indexOf("MSIE"))?(i="Microsoft Internet Explorer",a=r.substring(n+5)):-1!==(n=r.indexOf("Chrome"))?(i="Chrome",a=r.substring(n+7)):-1!==(n=r.indexOf("Safari"))?(i="Safari",a=r.substring(n+7),-1!==(n=r.indexOf("Version"))&&(a=r.substring(n+8))):-1!==(n=r.indexOf("Firefox"))?(i="Firefox",a=r.substring(n+8)):-1!==r.indexOf("Trident/")?(i="Microsoft Internet Explorer",a=r.substring(r.indexOf("rv:")+3)):(o=r.lastIndexOf(" ")+1)<(n=r.lastIndexOf("/"))&&(i=r.substring(o,n),a=r.substring(n+1),i.toLowerCase()===i.toUpperCase()&&(i=navigator.appName)),-1!==(s=a.indexOf(";"))&&(a=a.substring(0,s)),-1!==(s=a.indexOf(" "))&&(a=a.substring(0,s)),-1!==(s=a.indexOf(")"))&&(a=a.substring(0,s)),_=parseInt(""+a,10),isNaN(_)&&(a=""+parseFloat(navigator.appVersion),_=parseInt(navigator.appVersion,10));const c=/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(t);let p=!!navigator.cookieEnabled;void 0!==navigator.cookieEnabled||p||(document.cookie="testcookie",p=-1!==document.cookie.indexOf("testcookie"));let d="-";const l=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Chrome OS",r:/CrOS/},{s:"Linux",r:/(Linux|X11(?!.*CrOS))/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(Mac OS|MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(const e in l){const t=l[e];if(t.r.test(r)){d=t.s;break}}let u="-";switch(/Windows/.test(d)&&(u=/Windows (.*)/.exec(d)[1],d="Windows"),d){case"Mac OS":case"Mac OS X":case"Android":u=/(?:Android|Mac OS|Mac OS X|MacPPC|MacIntel|Mac_PowerPC|Macintosh) ([._d]+)/.exec(r)[1]}return{screen:e,browser:i,browserVersion:a,browserMajorVersion:_,mobile:c,os:d,osVersion:u,cookies:p}},Cookies=__webpack_require__(646),cookies=Cookies,_=e=>{const t="string"==typeof e?document.querySelectorAll(e):[e],r={};for(let e=0;e<t.length;e++)r[e]=t[e];return r._=_,r.el=r[0],r.n=t.length,r.each=e=>{for(let r=0;r<t.length;r++)e(t[r])},r.append=e=>{r.each((t=>t.appendChild(createEl(e))))},r.move=(e,t)=>{r.el.style.left=e,r.el.style.top=t},r.click=e=>{r.each((t=>{t.addEventListener("click",e)}))},r},createEl=e=>{const t=document.createElement("template");return t.innerHTML=e.trim(),t.content.firstChild},createEls=e=>{const t=document.createElement("template");return t.innerHTML=e,t.content.childNodes},loadScripts=[],unloadScripts=[],executeLoadScripts=()=>{loadScripts.forEach((e=>e())),loadScripts.length=0},executeUnloadScripts=()=>{unloadScripts.forEach((e=>e())),unloadScripts.length=0};document.addEventListener("DOMContentLoaded",(()=>executeLoadScripts())),window.addEventListener("beforeunload",(()=>{executeUnloadScripts()}));const load=e=>loadScripts.push(e),unload=e=>unloadScripts.push(e),mouseup=e=>document.addEventListener("mouseup",e),popstate=e=>window.addEventListener("popstate",e),online=e=>window.addEventListener("online",e),offline=e=>window.addEventListener("offline",e),error=e=>window.addEventListener("error",e),upgradeTimestamps=()=>{};class MicropubClient{endpoint;token;headers;config;constructor(e,t){this.endpoint=e,this.token=t,this.headers={accept:"application/json"},void 0!==t&&(this.headers.authorization=`Bearer ${t}`),this.getConfig=this.getConfig.bind(this),this.create=this.create.bind(this),this.read=this.read.bind(this),this.update=this.update.bind(this),this.delete=this.delete.bind(this),this.query=this.query.bind(this),this.upload=this.upload.bind(this)}getConfig(){return fetch(this.endpoint+"?q=config",{headers:this.headers}).then((e=>{if(200===e.status||201===e.status)return e.json().then((e=>e))}))}getCategories(){return fetch(this.endpoint+"?q=category",{headers:this.headers}).then((e=>{if(200===e.status||201===e.status)return e.json().then((e=>e))}))}create(e,t,r){const o=this.headers;return o["content-type"]="application/json",void 0===r&&(r="private"),fetch(this.endpoint,{method:"POST",headers:o,body:JSON.stringify({type:[`h-${e}`],properties:t})}).then((e=>{if(200===e.status||201===e.status)return e.headers.get("location")}))}read(e){const t=this.headers;return t["content-type"]="application/json",fetch(this.endpoint,{method:"GET",headers:t}).then((e=>{if(200===e.status||201===e.status)return e.json().then((e=>e))}))}update(e,t,r){const o={action:"update",url:e};return o[t]=r,fetch(this.endpoint,{method:"POST",headers:{accept:"application/json",authorization:`Bearer ${this.token}`,"content-type":"application/json"},body:JSON.stringify(o)}).then((e=>{200!==e.status&&201!==e.status||console.log("UPDATED!")}))}delete(e){}query(e,t){return fetch(this.endpoint+`?q=${e}&search=${t}`,{headers:this.headers}).then((e=>{if(200===e.status||201===e.status)return e.json().then((e=>e))}))}upload(){}}const appendAfter=(e,t)=>{e.parentNode.insertBefore(t,e.nextSibling)};function updateArticle(url,scroll){_("#loading").el.style.display="block";const xhr=new XMLHttpRequest;xhr.open("GET",url),xhr.setRequestHeader("X-Chromeless","1"),xhr.onload=function(){executeUnloadScripts();const dom=(new DOMParser).parseFromString(xhr.responseText,"text/html");console.log(xhr.responseText);const newElement=dom.querySelector("body > article"),currentElement=_("article#content").el;currentElement.height=0,appendAfter(currentElement,newElement),currentElement.remove(),document.body.scrollTop=document.documentElement.scrollTop=scroll,_("article#content a:not(.breakout)").each(upgradeLink),_("article#content script").each((el=>{""!=el.src?document.getElementsByTagName("head")[0].appendChild(el):eval(el.innerHTML)})),executeLoadScripts(),upgradeTimestamps();const h1=newElement.querySelector("h1");let title="";h1&&(title=h1.textContent+" — "+title),window.document.title=title,_("#loading").el.style.display="none"},xhr.timeout=1e4,xhr.ontimeout=function(){console.log(`Request for ${url} timed out. retrying..`),updateArticle(url,scroll)},xhr.send()}function upgradeLink(e){var t=e.href;if(-1!=t.indexOf(origin)){if(t.indexOf("#")>-1){var r=t.split("#"),o=window.location.href.split("#");if(r[0]==o[0])return}e.addEventListener("click",(e=>{e.ctrlKey||(e.preventDefault(),history.replaceState({scroll:window.pageYOffset},"title",window.location.href),updateArticle(t,0),history.pushState({scroll:0},"title",t))}))}}window.onpopstate=function(e){null!==e.state&&(console.log("popping",e.state),updateArticle(window.location,e.state.scroll))}})();var __webpack_exports__MicropubClient=__webpack_exports__.Q3,__webpack_exports___=__webpack_exports__._,__webpack_exports__cookies=__webpack_exports__.Qk,__webpack_exports__createEl=__webpack_exports__.ut,__webpack_exports__createEls=__webpack_exports__.Yv,__webpack_exports__error=__webpack_exports__.vU,__webpack_exports__getBrowser=__webpack_exports__.qs,__webpack_exports__load=__webpack_exports__.zD,__webpack_exports__mouseup=__webpack_exports__.wS,__webpack_exports__offline=__webpack_exports__.n4,__webpack_exports__online=__webpack_exports__.ps,__webpack_exports__popstate=__webpack_exports__.iZ,__webpack_exports__unload=__webpack_exports__.Rz,__webpack_exports__upgradeLink=__webpack_exports__.Wl,__webpack_exports__upgradeTimestamps=__webpack_exports__.PY;export{__webpack_exports__MicropubClient as MicropubClient,__webpack_exports___ as _,__webpack_exports__cookies as cookies,__webpack_exports__createEl as createEl,__webpack_exports__createEls as createEls,__webpack_exports__error as error,__webpack_exports__getBrowser as getBrowser,__webpack_exports__load as load,__webpack_exports__mouseup as mouseup,__webpack_exports__offline as offline,__webpack_exports__online as online,__webpack_exports__popstate as popstate,__webpack_exports__unload as unload,__webpack_exports__upgradeLink as upgradeLink,__webpack_exports__upgradeTimestamps as upgradeTimestamps};