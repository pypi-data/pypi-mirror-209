{% from "dict_as_json.jinja" import render_dict_as_json %}

var {{ layer.var_name }} = L.{{ layer.__factory__ }}(
    {% for arg in layer._args() %}
        {{ arg | tojson }},
    {% endfor %}    
    {
        {{ render_dict_as_json(layer._options()) }}
    }
);

{% if layer.map %}
    {{ layer.var_name }}.{{ layer.__bind_str__ }}( {{ layer.map.var_name }} );
{% endif %}

{% for binded in layer.binded_to %}
    {{ layer.var_name }}.{{ binded.__binded_str__ }}({{ binded._binded_attr() | tojson }});
{% endfor %}
