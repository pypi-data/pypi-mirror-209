{% from "dict_as_json.jinja" import render_dict_as_json %}

<div id="{{ map.id }}" class="{{ class_ }}" ></div>
<script>
var {{ map.var_name }} = L.map('{{ map.id }}', {    
        {{ render_dict_as_json(map._options()) }}
})

{% for layer in map._layers %}
    {{ layer() }}
    {{ layer.var_name }}.{{ layer.__bind_str__ }}( {{ map.var_name }} );
{% endfor %}

{% if not map.has_any_raster_layer() and leafletjs.default_tile_layer is not none %}
    {{ leafletjs.default_tile_layer(map=map) }}
{% endif %}

</script>

